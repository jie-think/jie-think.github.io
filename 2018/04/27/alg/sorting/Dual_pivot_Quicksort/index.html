<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Dual pivot Quicksort | Jie-Think</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="time: 2018-04-27 14:55:52 参考：https://www.geeksforgeeks.org/dual-pivot-quicksort/    The idea of dual pivot quick sort is to take two pivots, one in the left end of the array and the second, in the rig">
<meta name="keywords" content="sorting">
<meta property="og:type" content="article">
<meta property="og:title" content="Dual pivot Quicksort">
<meta property="og:url" content="http://yoursite.com/2018/04/27/alg/sorting/Dual_pivot_Quicksort/index.html">
<meta property="og:site_name" content="Jie-Think">
<meta property="og:description" content="time: 2018-04-27 14:55:52 参考：https://www.geeksforgeeks.org/dual-pivot-quicksort/    The idea of dual pivot quick sort is to take two pivots, one in the left end of the array and the second, in the rig">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://contribute.geeksforgeeks.org/wp-content/uploads/dual.png">
<meta property="og:updated_time" content="2018-08-29T13:21:32.071Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Dual pivot Quicksort">
<meta name="twitter:description" content="time: 2018-04-27 14:55:52 参考：https://www.geeksforgeeks.org/dual-pivot-quicksort/    The idea of dual pivot quick sort is to take two pivots, one in the left end of the array and the second, in the rig">
<meta name="twitter:image" content="http://contribute.geeksforgeeks.org/wp-content/uploads/dual.png">
  
    <link rel="alternate" href="/atom.xml" title="Jie-Think" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jie-Think</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-alg/sorting/Dual_pivot_Quicksort" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/27/alg/sorting/Dual_pivot_Quicksort/" class="article-date">
  <time datetime="2018-04-27T06:55:52.000Z" itemprop="datePublished">2018-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/alg/">alg</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Dual pivot Quicksort
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>time: 2018-04-27 14:55:52</p>
<p>参考：<a href="https://www.geeksforgeeks.org/dual-pivot-quicksort/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/dual-pivot-quicksort/</a></p>
<blockquote>
<p>  The idea of dual pivot quick sort is to take two pivots, one in the left end of the array and the second, in the right end of the array. The left pivot must be less than or equal to the right pivot, so we swap them if necessary.</p>
<p>  Then, we begin partitioning the array into three parts: in the first part, all elements will be less than the left pivot, in the second part all elements will be greater or equal to the left pivot and also will be less than or equal to the right pivot, and in the third part all elements will be greater than the right pivot. Then, we shift the two pivots to their appropriate positions as we see in the below bar, and after that we begin quicksorting these three parts recursively, using this method.</p>
<p>  Dual pivot quick sort is a little bit faster than the original single pivot quicksort.But still, the worst case will remain O(n^2) when the array is already sorted in an increasing or decreasing order.</p>
</blockquote>
<p><img src="http://contribute.geeksforgeeks.org/wp-content/uploads/dual.png" alt="An example"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C program to implement dual pivot QuickSort</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span>* lp)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span>* b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> temp = *a;</span><br><span class="line">	*a = *b;</span><br><span class="line">	*b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DualPivotQuickSort</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">		<span class="comment">// lp means left pivot, and rp means right pivot.</span></span><br><span class="line">		<span class="keyword">int</span> lp, rp; </span><br><span class="line">		rp = partition(arr, low, high, &amp;lp);</span><br><span class="line">		DualPivotQuickSort(arr, low, lp - <span class="number">1</span>);</span><br><span class="line">		DualPivotQuickSort(arr, lp + <span class="number">1</span>, rp - <span class="number">1</span>);</span><br><span class="line">		DualPivotQuickSort(arr, rp + <span class="number">1</span>, high);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span>* lp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"------- begin partition --------\n"</span>);</span><br><span class="line">	<span class="keyword">if</span> (arr[low] &gt; arr[high])</span><br><span class="line">		swap(&amp;arr[low], &amp;arr[high]);</span><br><span class="line">	<span class="comment">// p is the left pivot, and q is the right pivot.</span></span><br><span class="line">	<span class="keyword">int</span> j = low + <span class="number">1</span>,g = high - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> k = low + <span class="number">1</span>, p = arr[low], q = arr[high];</span><br><span class="line">	<span class="keyword">while</span> (k &lt;= g) &#123;</span><br><span class="line">	    <span class="built_in">printf</span>(<span class="string">"j: %d value: %d, g: %d value: %d, k: %d value: %d\n"</span>, j, arr[j], g, arr[g], k, arr[k]);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// if elements are less than the left pivot</span></span><br><span class="line">		<span class="keyword">if</span> (arr[k] &lt; p) &#123;</span><br><span class="line">			swap(&amp;arr[k], &amp;arr[j]);</span><br><span class="line">			j++;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// if elements are greater than or equal </span></span><br><span class="line">		<span class="comment">// to the right pivot</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (arr[k] &gt;= q) &#123;</span><br><span class="line">			<span class="keyword">while</span> (arr[g] &gt; q &amp;&amp; k &lt; g)</span><br><span class="line">				g--;</span><br><span class="line">			swap(&amp;arr[k], &amp;arr[g]);</span><br><span class="line">			g--;</span><br><span class="line">			<span class="keyword">if</span> (arr[k] &lt; p) &#123;</span><br><span class="line">				swap(&amp;arr[k], &amp;arr[j]);</span><br><span class="line">				j++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		k++;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">		    <span class="built_in">printf</span>(<span class="string">"%d "</span>, arr[i]);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	j--;</span><br><span class="line">	g++;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bring pivots to their appropriate positions.</span></span><br><span class="line">	swap(&amp;arr[low], &amp;arr[j]);</span><br><span class="line">	swap(&amp;arr[high], &amp;arr[g]);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// returning the indeces of the pivots.</span></span><br><span class="line">	*lp = j; <span class="comment">// because we cannot return two elements </span></span><br><span class="line">			<span class="comment">// from a function.</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"------- end partition --------\n"</span>);</span><br><span class="line">	<span class="keyword">return</span> g;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Driver code</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> arr[] = &#123; <span class="number">24</span>, <span class="number">8</span>, <span class="number">42</span>, <span class="number">75</span>, <span class="number">29</span>, <span class="number">77</span>, <span class="number">38</span>, <span class="number">57</span> &#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"24, 8, 42, 75, 29, 77, 38, 57\n"</span>);</span><br><span class="line">	DualPivotQuickSort(arr, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Sorted array: "</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>, arr[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">24, 8, 42, 75, 29, 77, 38, 57</span><br><span class="line">------- begin partition --------</span><br><span class="line">j: 1 value: 8, g: 6 value: 38, k: 1 value: 8</span><br><span class="line">24 8 42 75 29 77 38 57 </span><br><span class="line">j: 2 value: 42, g: 6 value: 38, k: 2 value: 42</span><br><span class="line">24 8 42 75 29 77 38 57 </span><br><span class="line">j: 2 value: 42, g: 6 value: 38, k: 3 value: 75</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">j: 2 value: 42, g: 5 value: 77, k: 4 value: 29</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">j: 2 value: 42, g: 5 value: 77, k: 5 value: 77</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">------- end partition --------</span><br><span class="line">------- begin partition --------</span><br><span class="line">j: 3 value: 38, g: 3 value: 38, k: 3 value: 38</span><br><span class="line">8 24 29 38 42 57 75 77 </span><br><span class="line">------- end partition --------</span><br><span class="line">------- begin partition --------</span><br><span class="line">------- end partition --------</span><br><span class="line">Sorted array: 8 24 29 38 42 57 75 77</span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基本的处理流程：</p>
<ol>
<li><p>选定最低位和最高位作为轴 num，也就是有两个轴。</p>
</li>
<li><p>lowPoint = low + 1 和 highPoint = high - 1 作为选轴的开始点。</p>
</li>
<li><p>scanPoint = lowPoint 一直扫描到 highPoint， 如果 scanPoint_Value &lt; low_Value : swap(lowPoint_Value, scanPoint_Value) elseif (scanPoint_Value &gt;= high_Value) : swap(highPoint_Value, scanPoint_Value)</p>
</li>
<li><p>最后 swap(low_Value, (lowPoint - 1).Value), swap(high_Value, (highPoint + 1)_Value)</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/04/27/alg/sorting/Dual_pivot_Quicksort/" data-id="cjlm2wsu7000naas66grrg4zn" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sorting/">sorting</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2018/05/17/build_own_x/data_base/build_simple_database/模块功能概述/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Build a Simple Database - 模块功能概述
        
      </div>
    </a>
  
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">1.</span> <span class="toc-text">总结</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 jie&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;qq646958863@163.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>