<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Learn CSS Grid</title>
      <link href="/2018/09/02/frontend/css/grid_learn/learn_css_grid/"/>
      <url>/2018/09/02/frontend/css/grid_learn/learn_css_grid/</url>
      <content type="html"><![CDATA[<p>视频教程推荐(建议先看一些基础概念): <a href="https://scrimba.com/g/gR8PTE" target="_blank" rel="noopener">https://scrimba.com/g/gR8PTE</a><br>简单教程: <a href="https://medium.freecodecamp.org/learn-css-grid-in-5-minutes-f582e87b1228" target="_blank" rel="noopener">https://medium.freecodecamp.org/learn-css-grid-in-5-minutes-f582e87b1228</a><br>详细教程: <a href="https://learncssgrid.com/" target="_blank" rel="noopener">https://learncssgrid.com/</a></p><p>该内容主要来自:<br><a href="https://scrimba.com/g/gR8PTE" target="_blank" rel="noopener">https://scrimba.com/g/gR8PTE</a> and <a href="https://medium.freecodecamp.org/learn-css-grid-in-5-minutes-f582e87b1228" target="_blank" rel="noopener">https://medium.freecodecamp.org/learn-css-grid-in-5-minutes-f582e87b1228</a></p><p><img src="https://cdn-images-1.medium.com/max/2000/1*Oc88rInEcNuY-xCN3e1iPQ.png" alt="目标结构"></p><h2 id="重要术语解释"><a href="#重要术语解释" class="headerlink" title="重要术语解释"></a>重要术语解释</h2><p>参考: <a href="https://www.jianshu.com/p/d183265a8dad" target="_blank" rel="noopener">https://www.jianshu.com/p/d183265a8dad</a></p><ol><li><p>网格容器（Grid Container）<br>元素应用display:grid，它是其所有网格项的父元素。下面例子container就是网格容器。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item-1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item-2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item-3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>网格项（Grid Item）</p></li></ol><p>网格容器的子元素，下面的item元素是网格项，但sub-item不是。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"sub-item"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ol start="3"><li>网格线（Grid Line）</li></ol><p>组成网格线的分界线。它们可以是列网格线（column grid lines），也可以是行网格线（row grid lines）并且居于行或列的任意一侧，下面黄色线就是列网格线。<br><img src="https://upload-images.jianshu.io/upload_images/3600755-294354d5cb39077a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/383/format/webp" alt="grid lines"></p><ol start="4"><li><p>网格轨道（Grid Track）<br>两个相邻的网格线之间为网格轨道。你可以认为它们是网格的列或行，下面在第二个和第三个网格线之间的黄色部分为网格轨道。<br><img src="https://upload-images.jianshu.io/upload_images/3600755-6fd45c7949a3f29b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/383/format/webp" alt="Grid Track"></p></li><li><p>网格单元（Grid Cell）<br>两个相邻的列网格线和两个相邻的行网格线组成的是网格单元，它是最小的网格单元。下面行网格线1（row grid lines 1）、行网格线2（row grid lines 2）和列网格线2（column grid lines 2）、列网格线3（column grid lines 3）组成的黄色区域为网格单元。<br><img src="https://upload-images.jianshu.io/upload_images/3600755-5feacaa8175909c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/383/format/webp" alt="Grid Cell"></p></li><li><p>网格区（Grid Area）<br>网格区是由任意数量网格单元组成，下面行网格线1（row grid lines 1）、行网格线3（row grid lines 3）和列网格线1（column grid lines 1）、列网格线3（column grid lines3）组成的黄色区域为网格区。<br><img src="https://upload-images.jianshu.io/upload_images/3600755-2a62922e76f77c3c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/383/format/webp" alt="Grid Area"></p></li></ol><h2 id="第一个-grid-布局"><a href="#第一个-grid-布局" class="headerlink" title="第一个 grid 布局"></a>第一个 grid 布局</h2><blockquote><p>The two core ingredients of a CSS Grid are the wrapper (parent) and the items (children). The wrapper is the actual grid and the items are the content inside the grid.<br>CSS Grid的两个核心组成部分是包装器（父）和项（子）。 包装器是实际网格，项目是网格内的内容。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>result:<br><img src="https://cdn-images-1.medium.com/max/1600/1*vTY7C5FMIp8OLkjrgp-vBg.png" alt="first grid layout result"></p><h2 id="Columns-and-rows"><a href="#Columns-and-rows" class="headerlink" title="Columns and rows"></a>Columns and rows</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">50px</span> <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn-images-1.medium.com/max/1600/1*fJNIdDiScjhI9CZjdxv3Eg.png" alt=""></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">200px</span> <span class="number">50px</span> <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn-images-1.medium.com/max/1600/1*M9WbiVEFcseUCW6qeG4lSQ.png" alt=""></p><h2 id="items"><a href="#items" class="headerlink" title="items"></a>items</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item1</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column-start</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">grid-column-end</span>: <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn-images-1.medium.com/max/1600/1*he7CoAzdQB3sei_WpHOtNg.png" alt=""></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item1</span> &#123;</span><br><span class="line">    <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn-images-1.medium.com/max/1600/1*l-adYpQCGve7W6DWY949pw.png" alt=""></p>]]></content>
      
      <categories>
          
          <category> frontend </category>
          
          <category> learn notebook </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
            <tag> css grid </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>markfile start learn</title>
      <link href="/2018/09/01/backend/tools/markfile_start_learn/"/>
      <url>/2018/09/01/backend/tools/markfile_start_learn/</url>
      <content type="html"><![CDATA[<p>参考: <a href="https://www.cnblogs.com/wang_yb/p/3990952.html" target="_blank" rel="noopener">https://www.cnblogs.com/wang_yb/p/3990952.html</a></p><h2 id="Makefile-简介"><a href="#Makefile-简介" class="headerlink" title="Makefile 简介"></a>Makefile 简介</h2><p>Makefile 是和 make 命令一起配合使用的.</p><p>很多大型项目的编译都是通过 Makefile 来组织的, 如果没有 Makefile, 那很多项目中各种库和代码之间的依赖关系不知会多复杂.</p><p>Makefile的组织流程的能力如此之强, 不仅可以用来编译项目, 还可以用来组织我们平时的一些日常操作. 这个需要大家发挥自己的想象力.</p><h3 id="Makefile-主要的-5个部分-显示规则-隐晦规则-变量定义-文件指示-注释"><a href="#Makefile-主要的-5个部分-显示规则-隐晦规则-变量定义-文件指示-注释" class="headerlink" title="Makefile 主要的 5个部分 (显示规则, 隐晦规则, 变量定义, 文件指示, 注释)"></a>Makefile 主要的 5个部分 (显示规则, 隐晦规则, 变量定义, 文件指示, 注释)</h3><p>Makefile基本格式如下:</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target ... : prerequisites ...</span><br><span class="line">    command</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>其中,</p><ul><li>target        - 目标文件, 可以是 Object File, 也可以是可执行文件</li><li>prerequisites - 生成 target 所需要的文件或者目标</li><li>command       - make需要执行的命令 (任意的shell命令), Makefile中的命令必须以 <code>[tab] 开头</code></li></ul><ol><li>显示规则 :: 说明如何生成一个或多个目标文件(包括 生成的文件, 文件的依赖文件, 生成的命令)</li><li>隐晦规则 :: make的自动推导功能所执行的规则</li><li>变量定义 :: Makefile中定义的变量</li><li>文件指示 :: Makefile中引用其他Makefile; 指定Makefile中有效部分; 定义一个多行命令</li><li>注释     :: Makefile只有行注释 “#”, 如果要使用或者输出”#”字符, 需要进行转义, “#“</li></ol><h3 id="1-2-GNU-make-的工作方式"><a href="#1-2-GNU-make-的工作方式" class="headerlink" title="1.2 GNU make 的工作方式"></a>1.2 GNU make 的工作方式</h3><ol><li>读入主Makefile (主Makefile中可以引用其他Makefile)</li><li>读入被include的其他Makefile</li><li>初始化文件中的变量</li><li>推导隐晦规则, 并分析所有规则</li><li>为所有的目标文件创建依赖关系链</li><li>根据依赖关系, 决定哪些目标要重新生成</li><li>执行生成命令</li></ol><h2 id="实例解析"><a href="#实例解析" class="headerlink" title="实例解析"></a>实例解析</h2>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
            <tag> build tools </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>apidoc start learn</title>
      <link href="/2018/08/31/backend/tools/apidoc_start_learn/"/>
      <url>/2018/08/31/backend/tools/apidoc_start_learn/</url>
      <content type="html"><![CDATA[<p>参考: <a href="http://apidocjs.com/" target="_blank" rel="noopener">http://apidocjs.com/</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p><code>Javadoc-Style</code> (can be used in C#, Go, Dart, Java, JavaScript, PHP, TypeScript and all other Javadoc capable languages):</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id Request User information</span></span><br><span class="line"><span class="comment"> * @apiName GetUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; firstname Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; lastname  Lastname of the User.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install apidoc -g</span><br></pre></td></tr></table></figure><h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apidoc -i myapp/ -o apidoc/ -t mytemplate/</span><br></pre></td></tr></table></figure><h2 id="Configuration-apidoc-json"><a href="#Configuration-apidoc-json" class="headerlink" title="Configuration (apidoc.json)"></a>Configuration (apidoc.json)</h2><p>ex:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"example"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"apiDoc basic example"</span>,</span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"Custom apiDoc browser title"</span>,</span><br><span class="line">  <span class="attr">"url"</span> : <span class="string">"https://api.github.com/v1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Header-Footer"><a href="#Header-Footer" class="headerlink" title="Header / Footer"></a>Header / Footer</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"header"</span>: &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"My own header title"</span>,</span><br><span class="line">    <span class="attr">"filename"</span>: <span class="string">"header.md"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"footer"</span>: &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"My own footer title"</span>,</span><br><span class="line">    <span class="attr">"filename"</span>: <span class="string">"footer.md"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h2><p><code>apidoc.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"example"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"A basic apiDoc example"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>example.js</code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id Request User information</span></span><br><span class="line"><span class="comment"> * @apiName GetUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; firstname Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; lastname  Lastname of the User.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "firstname": "John",</span></span><br><span class="line"><span class="comment"> *       "lastname": "Doe"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiError UserNotFound The id of the User was not found.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiErrorExample Error-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "error": "UserNotFound"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @apiDefine UserNotFoundError</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiError UserNotFound The id of the User was not found.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiErrorExample Error-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "error": "UserNotFound"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id Request User information</span></span><br><span class="line"><span class="comment"> * @apiName GetUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; firstname Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; lastname  Lastname of the User.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "firstname": "John",</span></span><br><span class="line"><span class="comment"> *       "lastname": "Doe"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiUse UserNotFoundError</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;put&#125; /user/ Modify User information</span></span><br><span class="line"><span class="comment"> * @apiName PutUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id          Users unique ID.</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;String&#125; [firstname] Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;String&#125; [lastname]  Lastname of the User.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiUse UserNotFoundError</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="Versioning"><a href="#Versioning" class="headerlink" title="Versioning"></a>Versioning</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id Get User information</span></span><br><span class="line"><span class="comment"> * @apiVersion 0.1.0</span></span><br><span class="line"><span class="comment"> * @apiName GetUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; firstname Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; lastname  Lastname of the User.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "firstname": "John",</span></span><br><span class="line"><span class="comment"> *       "lastname": "Doe"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiError UserNotFound The id of the User was not found.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiErrorExample Error-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "error": "UserNotFound"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id Get User information and Date of Registration.</span></span><br><span class="line"><span class="comment"> * @apiVersion 0.2.0</span></span><br><span class="line"><span class="comment"> * @apiName GetUser</span></span><br><span class="line"><span class="comment"> * @apiGroup User</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; firstname  Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;String&#125; lastname   Lastname of the User.</span></span><br><span class="line"><span class="comment"> * @apiSuccess &#123;Date&#125;   registered Date of Registration.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "firstname": "John",</span></span><br><span class="line"><span class="comment"> *       "lastname": "Doe"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiError UserNotFound The id of the User was not found.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiErrorExample Error-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "error": "UserNotFound"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>该版本可用于每个块，也可用于继承块。您不必更改继承块上的版本，解析器会自动检查最近的前任.</p><h2 id="apiDoc-Params"><a href="#apiDoc-Params" class="headerlink" title="apiDoc-Params"></a>apiDoc-Params</h2><p>列几个常用的标签:</p><h3 id="api"><a href="#api" class="headerlink" title="@api"></a>@api</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@api &#123;method&#125; path [title]</span><br></pre></td></tr></table></figure><p>Required!<br>Without that indicator, apiDoc parser ignore the documentation block. (apidoc 工具的标识开始)</p><h2 id="apiName"><a href="#apiName" class="headerlink" title="@apiName"></a>@apiName</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiName name</span><br></pre></td></tr></table></figure><h2 id="apiGroup"><a href="#apiGroup" class="headerlink" title="@apiGroup"></a>@apiGroup</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiGroup name</span><br></pre></td></tr></table></figure><h2 id="apiDefine"><a href="#apiDefine" class="headerlink" title="@apiDefine"></a>@apiDefine</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@apiDefine name [title]</span><br><span class="line">    [description]</span><br></pre></td></tr></table></figure><h2 id="apiUse"><a href="#apiUse" class="headerlink" title="@apiUse"></a>@apiUse</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiUse name</span><br></pre></td></tr></table></figure><h2 id="apiDeprecated"><a href="#apiDeprecated" class="headerlink" title="@apiDeprecated"></a>@apiDeprecated</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiDeprecated [text]</span><br></pre></td></tr></table></figure><p>Ex:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @apiDeprecated</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @apiDeprecated use now (#Group:Name).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Example: to set a link to the GetDetails method of your group User</span></span><br><span class="line"><span class="comment"> * write (#User:GetDetails)</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p><h2 id="apiDescription"><a href="#apiDescription" class="headerlink" title="@apiDescription"></a>@apiDescription</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiDescription text</span><br></pre></td></tr></table></figure><p>Ex:<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @apiDescription This is the Description.</span></span><br><span class="line"><span class="comment"> * It is multiline capable.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Last line of Description.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p><h2 id="apiParam"><a href="#apiParam" class="headerlink" title="@apiParam"></a>@apiParam</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiParam [(group)] [&#123;type&#125;] [field=defaultValue] [description]</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; id Users unique ID.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;post&#125; /user/</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;String&#125; [firstname]  Optional Firstname of the User.</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;String&#125; lastname     Mandatory Lastname.</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;String&#125; country="DE" Mandatory with default value "DE".</span></span><br><span class="line"><span class="comment"> * @apiParam &#123;Number&#125; [age=18]     Optional Age with default 18.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @apiParam (Login) &#123;String&#125; pass Only logged in users can post this.</span></span><br><span class="line"><span class="comment"> *                                 In generated documentation a separate</span></span><br><span class="line"><span class="comment"> *                                 "Login" Block will be generated.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>(group)</td><td>All parameters will be grouped by this name. <br>Without a group, the default <code>Parameter</code> is set.<br>You can set a title and description with @apiDefine.</td></tr><tr><td>{type}</td><td>Parameter type, e.g. <code>{Boolean}</code>, <code>{Number}</code>, <code>{String}</code>, <code>{Object}</code>, <code>{String[]}</code> (array of strings), …</td></tr><tr><td>{type{size}}</td><td>Information about the size of the variable.<br><code>{string{..5}}</code> a string that has max 5 chars.<br><code>{string{2..5}}</code> a string that has min. 2 chars and max 5 chars.<br><code>{number{100-999}}</code> a number between 100 and 999.</td></tr><tr><td>{type=allowedValues}</td><td>Information about allowed values of the variable.<br><code>{string=&quot;small&quot;}</code> a string that can only contain the word “small” (a constant).<br><code>{string=&quot;small&quot;,&quot;huge&quot;}</code> a string that can contain the words “small” or “huge”.<br><code>{number=1,2,3,99}</code> a number with allowed values of 1, 2, 3 and 99.<br><br>Can be combined with size:<br><code>{string {..5}=&quot;small&quot;,&quot;huge&quot;}</code> a string that has max 5 chars and only contain the words “small” or “huge”.</td></tr><tr><td>field</td><td>Variablename</td></tr><tr><td>[field]</td><td>Fieldname with brackets define the Variable as optional.</td></tr><tr><td>=defaultValue</td><td>The parameters default value.</td></tr><tr><td>description</td><td>Description of the field.</td></tr></tbody></table><h2 id="apiParamExample"><a href="#apiParamExample" class="headerlink" title="@apiParamExample"></a>@apiParamExample</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@apiParamExample [&#123;type&#125;] [title]</span><br><span class="line">                   example</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> * @apiParamExample &#123;json&#125; Request-Example:</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "id": 4711</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="apiSuccess"><a href="#apiSuccess" class="headerlink" title="@apiSuccess"></a>@apiSuccess</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiSuccess [(group)] [&#123;type&#125;] field [description]</span><br></pre></td></tr></table></figure><h2 id="apiSuccessExample"><a href="#apiSuccessExample" class="headerlink" title="@apiSuccessExample"></a>@apiSuccessExample</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@apiSuccessExample [&#123;type&#125;] [title]</span><br><span class="line">                   example</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> * @apiSuccessExample &#123;json&#125; Success-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 200 OK</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "firstname": "John",</span></span><br><span class="line"><span class="comment"> *       "lastname": "Doe"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="apiError"><a href="#apiError" class="headerlink" title="@apiError"></a>@apiError</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@apiError [(group)] [&#123;type&#125;] field [description]</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> * @apiError UserNotFound The &lt;code&gt;id&lt;/code&gt; of the User was not found.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h2 id="apiErrorExample"><a href="#apiErrorExample" class="headerlink" title="@apiErrorExample"></a>@apiErrorExample</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@apiErrorExample [&#123;type&#125;] [title]</span><br><span class="line">                 example</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> * @apiErrorExample &#123;json&#125; Error-Response:</span></span><br><span class="line"><span class="comment"> *     HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *       "error": "UserNotFound"</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> apidoc </tag>
            
            <tag> learn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>个人软件安装记录(mac osx)</title>
      <link href="/2018/08/31/self_doc/%E4%B8%AA%E4%BA%BA%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/"/>
      <url>/2018/08/31/self_doc/%E4%B8%AA%E4%BA%BA%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95/</url>
      <content type="html"><![CDATA[<h3 id="tree-install"><a href="#tree-install" class="headerlink" title="tree install"></a>tree install</h3><p>date: 2018-08-29 00:00:00<br>cmd: brew install tree</p><h3 id="apidoc-install"><a href="#apidoc-install" class="headerlink" title="apidoc install"></a>apidoc install</h3><p>date: 2018-08-31 15:56:41<br>cmd: npm install apidoc -g</p>]]></content>
      
      
        <tags>
            
            <tag> tools安装 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker 构建最小 go app</title>
      <link href="/2018/08/30/backend/docker/docker_%E6%9E%84%E5%BB%BA%E6%9C%80%E5%B0%8F_go_app/"/>
      <url>/2018/08/30/backend/docker/docker_%E6%9E%84%E5%BB%BA%E6%9C%80%E5%B0%8F_go_app/</url>
      <content type="html"><![CDATA[<p>参考: <a href="https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/" target="_blank" rel="noopener">https://blog.codeship.com/building-minimal-docker-containers-for-go-applications/</a></p><h2 id="写应用"><a href="#写应用" class="headerlink" title="写应用"></a>写应用</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"io/ioutil"</span></span><br><span class="line">    <span class="string">"net/http"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    resp, err := http.Get(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">    check(err)</span><br><span class="line">    body, err := ioutil.ReadAll(resp.Body)</span><br><span class="line">    check(err)</span><br><span class="line">    fmt.Println(<span class="built_in">len</span>(body))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(err error)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.Println(err)</span><br><span class="line">        os.Exit(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dockerize"><a href="#Dockerize" class="headerlink" title="Dockerize"></a>Dockerize</h2><p>basic image</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="keyword">onbuild</span></span><br></pre></td></tr></table></figure><p>compile Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:latest </span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /app </span></span><br><span class="line"><span class="bash">ADD . /app/ </span></span><br><span class="line"><span class="bash">WORKDIR /app </span></span><br><span class="line"><span class="bash">RUN go build -o main . </span></span><br><span class="line"><span class="bash">CMD [<span class="string">"/app/main"</span>]</span></span><br></pre></td></tr></table></figure><p>这个构建出来需要500M</p><p>因为 <code>golang:latest</code> 是从 <code>Debian Jessie</code> 构建出来的, 底层是操作系统, so 导致镜像特别大.</p><h2 id="Compile"><a href="#Compile" class="headerlink" title="Compile!!"></a>Compile!!</h2><ol><li>先编译工程</li><li>构建镜像</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go build -o main .</span><br><span class="line">docker build -t example-scratch:v1 -f Dockerfile.scratch .</span><br></pre></td></tr></table></figure><p>Dockerfile.scratch 内容:<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> main /</span></span><br><span class="line"><span class="bash">CMD [<span class="string">"/main"</span>]</span></span><br></pre></td></tr></table></figure></p><p>这样构建是无法工作的, 原因就在于生产的 main 是需要系统的动态链接库.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -it example-scratch:v1</span><br><span class="line">standard_init_linux.go:178: <span class="built_in">exec</span> user process caused <span class="string">"exec format error"</span></span><br></pre></td></tr></table></figure><p>解决方法:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o main .</span><br></pre></td></tr></table></figure><p>禁用cgo，生产一个静态二进制文件, 我们还将操作系统设置为Linux, -a标志意味着重建我们正在使用的所有软件包，这意味着所有导入都将在cgo禁用的情况下重建。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t example-scratch:v2 -f Dockerfile.scratch .</span><br><span class="line">$ docker run -it example-scratch:v2</span><br><span class="line">  118146 <span class="comment"># it work</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> docker app </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>basic css learn - 1. css display grid</title>
      <link href="/2018/08/29/frontend/css/basic_1_0_css_position/"/>
      <url>/2018/08/29/frontend/css/basic_1_0_css_position/</url>
      <content type="html"><![CDATA[<p>参考: <a href="https://atomiks.github.io/30-seconds-of-css/" target="_blank" rel="noopener">https://atomiks.github.io/30-seconds-of-css/</a></p>]]></content>
      
      <categories>
          
          <category> frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
            <tag> css grid </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Program for Fibonacci numbers</title>
      <link href="/2018/08/29/alg/DynamicProgramming/1_1_Fibonacci%20numbers/"/>
      <url>/2018/08/29/alg/DynamicProgramming/1_1_Fibonacci%20numbers/</url>
      <content type="html"><![CDATA[<p>来源：<a href="https://www.cdn.geeksforgeeks.org/program-for-nth-fibonacci-number/" target="_blank" rel="noopener">https://www.cdn.geeksforgeeks.org/program-for-nth-fibonacci-number/</a></p><p>The Fibonacci numbers are the numbers in the following integer sequence.</p><p>0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, ……..</p><p>In mathematical terms, the sequence Fn of Fibonacci numbers is defined by the recurrence relation</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Fn = Fn-1 + Fn-2</span><br></pre></td></tr></table></figure><p>with seed values</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F0 = 0 and F1 = 1.</span><br></pre></td></tr></table></figure><p><img src="https://www.geeksforgeeks.org/wp-content/uploads/fibonacci-sequence.png" alt="fibonacci-sequence"></p><p>Given a number n, print n-th Fibonacci Number.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input  : n = 2</span><br><span class="line">Output : 1</span><br><span class="line"></span><br><span class="line">Input  : n = 9</span><br><span class="line">Output : 34</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>动态规划</title>
      <link href="/2018/08/29/alg/DynamicProgramming/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/"/>
      <url>/2018/08/29/alg/DynamicProgramming/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>动态规划求解的一般思路： <br><br>　　判断问题的子结构（也可看作状态），当具有最优子结构时，动态规划可能适用。<br><br>　　求解重叠子问题。一个递归算法不断地调用同一问题，递归可以转化为查表从而利用子问题的解。分治法则不同，每次递归都产生新的问题。<br><br>　　重新构造一个最优解。<br></p><p><strong>最优子结构?</strong></p>]]></content>
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>动态规划题集</title>
      <link href="/2018/08/29/alg/DynamicProgramming/%E9%A2%98%E9%9B%86/"/>
      <url>/2018/08/29/alg/DynamicProgramming/%E9%A2%98%E9%9B%86/</url>
      <content type="html"><![CDATA[<p>摘录：<a href="https://www.geeksforgeeks.org/dynamic-programming/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/dynamic-programming/</a></p><p><a href="https://www.geeksforgeeks.org/category/algorithm/dynamic-programming/" target="_blank" rel="noopener">‘Recent Articles’ on Dynamic Programming</a></p><p><strong>Topics:</strong></p><ul><li><a href="https://www.geeksforgeeks.org/dynamic-programming/#concepts" target="_blank" rel="noopener">Basic Concepts</a></li><li><a href="https://www.geeksforgeeks.org/dynamic-programming/#advanced" target="_blank" rel="noopener">Advanced Concepts</a></li><li><p><a href="https://www.geeksforgeeks.org/dynamic-programming/#basicProblems" target="_blank" rel="noopener">Basic Problems</a></p></li><li><p><a href="https://www.geeksforgeeks.org/dynamic-programming/#mediumProblems" target="_blank" rel="noopener">Intermediate Problems</a></p></li><li><a href="https://www.geeksforgeeks.org/dynamic-programming/#hardProblems" target="_blank" rel="noopener">Hard Problems</a></li><li><a href="https://www.geeksforgeeks.org/dynamic-programming/#quick" target="_blank" rel="noopener">Quick Links</a></li></ul><p><strong>Basic Concepts:</strong></p><ol><li><a href="https://www.geeksforgeeks.org/dynamic-programming-set-1/" target="_blank" rel="noopener">Overlapping Subproblems Property</a></li><li><a href="https://www.geeksforgeeks.org/dynamic-programming-set-2-optimal-substructure-property/" target="_blank" rel="noopener">Optimal Substructure Property</a></li><li><a href="https://www.geeksforgeeks.org/solve-dynamic-programming-problem/" target="_blank" rel="noopener">How to solve a Dynamic Programming Problem ?</a></li><li><a href="https://www.geeksforgeeks.org/tabulation-vs-memoizatation/" target="_blank" rel="noopener">Tabulation vs Memoizatation</a></li></ol><p><strong>Advanced Concepts :</strong></p><ol><li><a href="https://www.geeksforgeeks.org/bitmasking-and-dynamic-programming-set-1-count-ways-to-assign-unique-cap-to-every-person/" target="_blank" rel="noopener">Bitmasking and Dynamic Programming | Set 1</a></li><li><a href="https://www.geeksforgeeks.org/digit-dp-introduction/" target="_blank" rel="noopener">Digit DP | Introduction</a></li></ol><p><strong>Basic Problems :</strong></p><ol><li><ul><li style="list-style: none"><input type="checkbox" checked> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/program-for-nth-fibonacci-number/" target="_blank" rel="noopener">Fibonacci numbers</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-9-binomial-coefficient/" target="_blank" rel="noopener">Binomial Coefficient</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-4-longest-common-subsequence/" target="_blank" rel="noopener">Longest Common Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-repeated-subsequence/" target="_blank" rel="noopener">Longest Repeated Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/largest-sum-contiguous-subarray/" target="_blank" rel="noopener">Largest Sum Contiguous Subarray</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/ugly-numbers/" target="_blank" rel="noopener">Ugly numbers</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-size-sub-matrix-with-all-1s-in-a-binary-matrix/" target="_blank" rel="noopener">Maximum size square sub-matrix with all 1s</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-3-longest-increasing-subsequence/" target="_blank" rel="noopener">Longest Increasing Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-6-min-cost-path/" target="_blank" rel="noopener">Min Cost Path</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-7-coin-change/" target="_blank" rel="noopener">Coin change problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-5-edit-distance/" target="_blank" rel="noopener">Minimum number of edits ( operations ) require to convert string 1 to string 2</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-13-cutting-a-rod/" target="_blank" rel="noopener">Cutting a Rod</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-subset-sum-problem/" target="_blank" rel="noopener">Subset Sum Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-number-of-jumps-to-reach-end-of-a-given-array/" target="_blank" rel="noopener">Minimum number of jumps to reach end</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-34-assembly-line-scheduling/" target="_blank" rel="noopener">Assembly line scheduling</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-14-maximum-sum-increasing-subsequence/" target="_blank" rel="noopener">Maximum Sum Increasing Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-20-maximum-length-chain-of-pairs/" target="_blank" rel="noopener">Maximum Length Chain of Pairs</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-common-substring/" target="_blank" rel="noopener">Longest Common Substring</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-possible-paths-top-left-bottom-right-nxm-matrix/" target="_blank" rel="noopener">Count all possible paths from top left to bottom right of a mXn matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/program-nth-catalan-number/" target="_blank" rel="noopener">nth Catalan Number</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-ways-reach-given-score-game/" target="_blank" rel="noopener">Count number of ways to reach a given score in a game</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/tiling-problem/" target="_blank" rel="noopener">Tiling Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-even-length-binary-sequences-with-same-sum-of-first-and-second-half-bits/" target="_blank" rel="noopener">Count even length binary sequences with same sum of first and second half bits</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-number-of-solutions-of-a-linear-equation-of-n-variables/" target="_blank" rel="noopener">Find number of solutions of a linear equation of n variables</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/bell-numbers-number-of-ways-to-partition-a-set/" target="_blank" rel="noopener">Bell Numbers (Number of ways to Partition a Set)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/compute-ncr-p-set-1-introduction-and-dynamic-programming-solution/" target="_blank" rel="noopener">Compute nCr % p</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/permutation-coefficient/" target="_blank" rel="noopener">Permutation Coefficient</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-of-ways-to-fill-a-n-x-4-grid-using-1-x-4-tiles/" target="_blank" rel="noopener">Count number of ways to fill a “n x 4” grid using “1 x 4” tiles</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/space-optimized-solution-lcs/" target="_blank" rel="noopener">A Space Optimized Solution of LCS</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-maximum-length-snake-sequence/" target="_blank" rel="noopener">Find maximum length Snake sequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-cost-to-fill-given-weight-in-a-bag/" target="_blank" rel="noopener">Minimum cost to fill given weight in a bag</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/game-theory-choice-area/" target="_blank" rel="noopener">Choice of area</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-weight-path-ending-element-last-row-matrix/" target="_blank" rel="noopener">Maximum weight path ending at any element of last row in a matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/recursively-break-number-3-parts-get-maximum-sum/" target="_blank" rel="noopener">Recursively break a number in 3 parts to get maximum sum</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/path-maximum-average-value/" target="_blank" rel="noopener">Path with maximum average value</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-sum-pairs-specific-difference/" target="_blank" rel="noopener">Maximum sum of pairs with specific difference</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-subsequence-sum-such-that-no-three-are-consecutive/" target="_blank" rel="noopener">Maximum subsequence sum such that no three are consecutive</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-subsequence-such-that-difference-between-adjacents-is-one/" target="_blank" rel="noopener">Longest subsequence such that difference between adjacents is one</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-path-sum-position-jumps-divisibility-condition/" target="_blank" rel="noopener">Maximum path sum for each position with jumps under divisibility condition</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-sum-bi-tonic-sub-sequence/" target="_blank" rel="noopener">Maximum sum Bi-tonic Sub-sequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/lcs-longest-common-subsequence-three-strings/" target="_blank" rel="noopener">LCS (Longest Common Subsequence) of three strings</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-path-sum-triangle/" target="_blank" rel="noopener">Maximum path sum in a triangle</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/friends-pairing-problem/" target="_blank" rel="noopener">Friends Pairing Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/size-array-repeated-deletion-lis/" target="_blank" rel="noopener">Size of array after repeated deletion of LIS</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-steps-minimize-n-per-given-condition/" target="_blank" rel="noopener">Minimum steps to minimize n as per given condition</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-path-sum-starting-cell-0-th-row-ending-cell-n-1-th-row/" target="_blank" rel="noopener">Maximum path sum that starting with any cell of 0-th row and ending with any cell of (N-1)-th row</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/gold-mine-problem/" target="_blank" rel="noopener">Gold Mine Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-number-endless-points/" target="_blank" rel="noopener">Find number of endless points</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/perfect-sum-problem-print-subsets-given-sum/" target="_blank" rel="noopener">Perfect Sum Problem (Print all subsets with given sum)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-sum-path-right-number-triangle/" target="_blank" rel="noopener">Maximum sum of a path in a Right Number Triangle</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/subset-sum-divisible-m/" target="_blank" rel="noopener">Subset with sum divisible by m</a></li></ul></li></ol><p><strong>Intermediate Problems :</strong></p><ol><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-10-0-1-knapsack-problem/" target="_blank" rel="noopener">0-1 Knapsack Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/length-of-the-longest-substring-without-repeating-characters/" target="_blank" rel="noopener">Length of the longest substring without repeating characters</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-ways-reach-destination-maze/" target="_blank" rel="noopener">Count number of ways to reach destination in a Maze</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/super-ugly-number-number-whose-prime-factors-given-set/" target="_blank" rel="noopener">Super Ugly Number (Number whose prime factors are in given set)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-of-ways-to-partition-a-set-into-k-subsets/" target="_blank" rel="noopener">Count number of ways to partition a set into k subsets</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-12-longest-palindromic-subsequence/" target="_blank" rel="noopener">Longest Palindromic Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-11-egg-dropping-puzzle/" target="_blank" rel="noopener">Egg Dropping Puzzle</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/weighted-job-scheduling/" target="_blank" rel="noopener">Weighted job scheduling</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-15-longest-bitonic-subsequence/" target="_blank" rel="noopener">Longest Bitonic Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-16-floyd-warshall-algorithm/" target="_blank" rel="noopener">Floyd Warshall Algorithm</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-18-partition-problem/" target="_blank" rel="noopener">Partition Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-14-variations-of-lis/" target="_blank" rel="noopener">Variations of LIS</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-21-box-stacking-problem/" target="_blank" rel="noopener">Box-Stacking Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-23-bellman-ford-algorithm/" target="_blank" rel="noopener">Bellman–Ford Algorithm</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-24-optimal-binary-search-tree/" target="_blank" rel="noopener">Optimal Binary Search Tree</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/largest-independent-set-problem/" target="_blank" rel="noopener">Largest Independent Set Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-28-minimum-insertions-to-form-a-palindrome/" target="_blank" rel="noopener">Minimum insertions to form a palindrome</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-number-deletions-make-string-palindrome/" target="_blank" rel="noopener">Minimum number of deletions to make a string palindrome</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-36-cut-a-rope-to-maximize-product/" target="_blank" rel="noopener">Maximum Product Cutting</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/clusteringpartitioning-an-array-such-that-sum-of-square-differences-is-minimum/" target="_blank" rel="noopener">Clustering/Partitioning an array such that sum of square differences is minimum</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-decimal-value-path-in-a-binary-matrix/" target="_blank" rel="noopener">Maximum decimal value path in a binary matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-derangements-permutation-such-that-no-element-appears-in-its-original-position/" target="_blank" rel="noopener">Count Derangements (Permutation such that no element appears in its original position)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dice-throw-problem/" target="_blank" rel="noopener">Dice Throw Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-31-optimal-strategy-for-a-game/" target="_blank" rel="noopener">Optimal Strategy for a game</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-32-word-break-problem/" target="_blank" rel="noopener">Word Break Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/remove-minimum-elements-either-side-2min-max/" target="_blank" rel="noopener">Remove minimum elements from either side such that 2*min becomes more than max</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-binary-strings-without-consecutive-1s/" target="_blank" rel="noopener">Count number of binary strings without consecutive 1’s</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-possible-decodings-given-digit-sequence/" target="_blank" rel="noopener">Count Possible Decodings of a given Digit Sequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-possible-paths-source-destination-exactly-k-edges/" target="_blank" rel="noopener">Count all possible walks from a source to a destination with exactly k edges</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/shortest-path-exactly-k-edges-directed-weighted-graph/" target="_blank" rel="noopener">Shortest path with exactly k edges in a directed and weighted graph</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-even-length-substring-sum-first-second-half/" target="_blank" rel="noopener">Longest Even Length Substring such that Sum of First and Second Half is same</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/vertex-cover-problem-set-2-dynamic-programming-solution-tree/" target="_blank" rel="noopener">Vertex Cover Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-the-minimum-cost-to-reach-a-destination-where-every-station-is-connected-in-one-direction/" target="_blank" rel="noopener">Find the minimum cost to reach destination using a train</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-profit-by-buying-and-selling-a-share-at-most-twice/" target="_blank" rel="noopener">Maximum profit by buying and selling a share at most twice</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-possible-ways-to-construct-buildings/" target="_blank" rel="noopener">Count possible ways to construct buildings</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-sum-of-digits-in-numbers-from-1-to-n/" target="_blank" rel="noopener">Compute sum of digits in all numbers from 1 to n</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/shortest-common-supersequence/" target="_blank" rel="noopener">Shortest Common Supersequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-minimum-number-of-coins-that-make-a-change/" target="_blank" rel="noopener">Minimum number of coins that make a given value</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-number-of-squares-whose-sum-equals-to-given-number-n/" target="_blank" rel="noopener">Minimum number of squares whose sum equals to given number n</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-length-of-the-longest-consecutive-path-in-a-character-matrix/" target="_blank" rel="noopener">length of the longest consecutive path from a given starting character</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/total-number-of-non-decreasing-numbers-with-n-digits/" target="_blank" rel="noopener">Total number of non-decreasing numbers with n digits</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-positive-points-to-reach-destination/" target="_blank" rel="noopener">Minimum Initial Points to Reach Destination</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-of-n-digit-numbers-whose-sum-of-digits-equals-to-given-sum/" target="_blank" rel="noopener">Count of n digit numbers whose sum of digits equals to given sum</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-total-number-of-n-digit-numbers-such-that-the-difference-between-the-sum-of-even-digits-and-odd-digits-is-1/" target="_blank" rel="noopener">Count total number of N digit numbers such that the difference between sum of even and odd digits is 1</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/bitmasking-and-dynamic-programming-set-1-count-ways-to-assign-unique-cap-to-every-person/" target="_blank" rel="noopener">Count ways to assign unique cap to every person</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-repeating-subsequence/" target="_blank" rel="noopener">Longest Repeating Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-the-longest-path-in-a-matrix-with-given-constraints/" target="_blank" rel="noopener">Find the longest path in a matrix with given constraints</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/number-of-paths-with-exactly-k-coins/" target="_blank" rel="noopener">Number of paths with exactly k coins</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/collect-maximum-coins-before-hitting-a-dead-end/" target="_blank" rel="noopener">Collect maximum coins before hitting a dead end</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-of-paths-with-k-turns/" target="_blank" rel="noopener">Count number of paths with at-most k turns</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/partition-a-set-into-two-subsets-such-that-the-difference-of-subset-sums-is-minimum/" target="_blank" rel="noopener">Partition a set into two subsets such that the difference of subset sums is minimum</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-zig-zag-subsequence/" target="_blank" rel="noopener">Longest Zig-Zag Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/largest-sum-zig-zag-sequence-in-a-matrix/" target="_blank" rel="noopener">Largest sum Zigzag sequence in a matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-of-subsets-having-a-particular-xor-value/" target="_blank" rel="noopener">Count number of subsets having a particular XOR value</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/weighted-job-scheduling-log-n-time/" target="_blank" rel="noopener">Weighted Job Scheduling in O(n Log n) time</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/ways-to-arrange-balls-such-that-adjacent-balls-are-of-different-types/" target="_blank" rel="noopener">Ways to arrange Balls such that adjacent balls are of different types</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-time-to-finish-tasks-without-skipping-two-consecutive/" target="_blank" rel="noopener">Minimum time to finish tasks without skipping two consecutive</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-if-string-is-k-palindrome-or-not/" target="_blank" rel="noopener">Find if string is K-Palindrome or not | Set 1</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-if-string-is-k-palindrome-or-not-set-2/" target="_blank" rel="noopener">Find if string is K-Palindrome or not | Set 2</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/wildcard-pattern-matching/" target="_blank" rel="noopener">Wildcard Pattern Matching</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-common-increasing-subsequence-lcs-lis/" target="_blank" rel="noopener">Longest Common Increasing Subsequence (LCS + LIS)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/printing-longest-common-subsequence-set-2-printing/" target="_blank" rel="noopener">Printing Longest Common Subsequence | Set 2 (Printing All)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-high-effort-vs-low-effort-tasks-problem/" target="_blank" rel="noopener">High-effort vs. Low-effort Tasks Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-minimum-adjustment-cost-of-an-array/" target="_blank" rel="noopener">Find minimum adjustment cost of an array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-jobs-involved-in-weighted-job-scheduling/" target="_blank" rel="noopener">Find Jobs involved in Weighted Job Scheduling</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-cost-make-two-strings-identical/" target="_blank" rel="noopener">Minimum Cost To Make Two Strings Identical</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-number-times-string-occurs-given-string/" target="_blank" rel="noopener">Find number of times a string occurs as a subsequence in given string</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-groupings-number-sum-digits-every-sub-group-less-equals-immediate-right-sub-group/" target="_blank" rel="noopener">Count digit groupings of a number with given constraints</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/non-crossing-lines-connect-points-circle/" target="_blank" rel="noopener">Non-crossing lines to connect points in a circle</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-distinct-subsequences/" target="_blank" rel="noopener">Count Distinct Subsequences</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-minimum-sum-one-every-three-consecutive-elements-taken/" target="_blank" rel="noopener">Find minimum sum such that one of every three consecutive elements is taken</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-distinct-occurrences-as-a-subsequence/" target="_blank" rel="noopener">Count distinct occurrences as a subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/number-of-permutation-with-k-inversions/" target="_blank" rel="noopener">Number of permutation with K inversions</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/print-longest-common-sub-sequences-lexicographical-order/" target="_blank" rel="noopener">Print all longest common sub-sequences in lexicographical order</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-distinct-subset-subsequence-sums-array/" target="_blank" rel="noopener">Find all distinct subset (or subsequence) sums of an array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-palindromic-subsequence-given-string/" target="_blank" rel="noopener">Count All Palindromic Subsequence in a given String</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-sum-alternating-subsequence-sum/" target="_blank" rel="noopener">Maximum sum alternating subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/sum-average-subsets/" target="_blank" rel="noopener">Sum of average of all subsets</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-maximum-values-expression/" target="_blank" rel="noopener">Minimum and Maximum values of an expression with * and +</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-sum-subsequence-least-one-every-four-consecutive-elements-picked/" target="_blank" rel="noopener">Minimum sum subsequence such that at least one of every four consecutive elements is picked</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/ways-to-write-n-as-sum-of-two-or-more-positive-integers/" target="_blank" rel="noopener">Ways to write n as sum of two or more positive integers</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/unbounded-knapsack-repetition-items-allowed/" target="_blank" rel="noopener">Unbounded Knapsack (Repetition of items allowed)</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/finding-the-maximum-square-sub-matrix-with-all-equal-elements/" target="_blank" rel="noopener">Finding the maximum square sub-matrix with all equal elements</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-maximum-dot-product-two-arrays-insertion-0s/" target="_blank" rel="noopener">Find Maximum dot product of two arrays with insertion of 0’s</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-points-collected-by-two-persons-allowed-to-meet-once/" target="_blank" rel="noopener">Maximum points collected by two persons allowed to meet once</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-sum-path-3-d-array/" target="_blank" rel="noopener">Minimum Sum Path In 3-D Array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-binary-strings-k-times-appearing-adjacent-two-set-bits/" target="_blank" rel="noopener">Count binary strings with k times appearing adjacent two set bits</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/highway-billboard-problem/" target="_blank" rel="noopener">Highway Billboard Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/probability-getting-least-k-heads-n-tosses-coins/" target="_blank" rel="noopener">Probability of getting at least K heads in N tosses of Coins</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-strings-can-formed-using-b-c-given-constraints/" target="_blank" rel="noopener">Count of strings that can be formed using a, b and c under given constraints</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/modify-array-to-maximize-sum-of-adjacent-differences/" target="_blank" rel="noopener">Modify array to maximize sum of adjacent differences</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/temple-offerings/" target="_blank" rel="noopener">Temple Offerings</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-alternating-subsequence/" target="_blank" rel="noopener">Longest alternating subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-steps-to-delete-a-string-after-repeated-deletion-of-palindrome-substrings/" target="_blank" rel="noopener">Minimum steps to delete a string after repeated deletion of palindrome substrings</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-number-deletions-make-sorted-sequence/" target="_blank" rel="noopener">Minimum number of deletions to make a sorted sequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-number-ways-jump-reach-end/" target="_blank" rel="noopener">Count number of ways to jump to reach end</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/shortest-uncommon-subsequence/" target="_blank" rel="noopener">Shortest Uncommon Subsequence</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-insertions-sort-array/" target="_blank" rel="noopener">Minimum insertions to sort an array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-building-bridges/" target="_blank" rel="noopener">Dynamic Programming | Building Bridges</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/check-valid-sequence-divisible-m/" target="_blank" rel="noopener">Check if any valid sequence is divisible by M</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/rencontres-number-counting-partial-derangements/" target="_blank" rel="noopener">Rencontres Number</a></li></ul></li></ol><p><strong>Hard Problems :</strong></p><ol><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-17-palindrome-partitioning/" target="_blank" rel="noopener">Palindrome Partitioning</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-18-word-wrap/" target="_blank" rel="noopener">Word Wrap Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-27-max-sum-rectangle-in-a-2d-matrix/" target="_blank" rel="noopener">Maximum sum rectangle in a 2D matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-8-matrix-chain-multiplication/" target="_blank" rel="noopener">Matrix Chain Multiplication</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-geometric-progression/" target="_blank" rel="noopener">Longest Geometric Progression</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-combinations-k-bit-numbers-n-bits-set-1-n-k-sorted-order/" target="_blank" rel="noopener">Find all combinations of k-bit numbers with n bits set where 1 &lt;= n &lt;= k in sorted order</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/check-whether-a-given-string-is-an-interleaving-of-two-other-given-strings-set-2/" target="_blank" rel="noopener">Find if a string is interleaved of two other strings</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/length-of-the-longest-arithmatic-progression-in-a-sorted-array/" target="_blank" rel="noopener">Longest Arithmetic Progression</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-set-37-boolean-parenthesization-problem/" target="_blank" rel="noopener">Boolean Parenthesization Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/mobile-numeric-keypad-problem/" target="_blank" rel="noopener">Mobile Numeric Keypad Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-cost-polygon-triangulation/" target="_blank" rel="noopener">Minimum Cost Polygon Triangulation</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/how-to-print-maximum-number-of-a-using-given-four-keys/" target="_blank" rel="noopener">How to print maximum number of A’s using given four keys</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/smallest-length-string-with-repeated-replacement-of-two-distinct-adjacent/" target="_blank" rel="noopener">Smallest length string with repeated replacement of two distinct adjacent</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/collect-maximum-points-in-a-grid-using-two-traversals/" target="_blank" rel="noopener">Collect maximum points in a grid using two traversals</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-weight-transformation-of-a-given-string/" target="_blank" rel="noopener">Maximum weight transformation of a given string</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/find-minimum-possible-size-of-array-with-given-rules-for-removal/" target="_blank" rel="noopener">Find minimum possible size of array with given rules for removing elements</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximum-profit-by-buying-and-selling-a-share-at-most-k-times/" target="_blank" rel="noopener">Maximum profit by buying and selling a share at most k times</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/number-subsequences-string-divisible-n/" target="_blank" rel="noopener">Number of subsequences in a string divisible by n</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/maximize-arrj-arri-arrl-arrk-such-that-i-j-k-l/" target="_blank" rel="noopener">Maximize arr[j] – arr[i] + arr[l] – arr[k], such that i &lt; j &lt; k &lt; l</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/space-optimized-dp-solution-0-1-knapsack-problem/" target="_blank" rel="noopener">A Space Optimized DP solution for 0-1 Knapsack Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/longest-repeating-and-non-overlapping-substring/" target="_blank" rel="noopener">Longest repeating and non-overlapping substring</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/all-ways-to-add-parenthesis-for-evaluation/" target="_blank" rel="noopener">All ways to add parenthesis for evaluation</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/number-of-palindromic-paths-in-a-matrix/" target="_blank" rel="noopener">Number of palindromic paths in a matrix</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-cost-sort-strings-using-reversal-operations-different-costs/" target="_blank" rel="noopener">Minimum cost to sort strings using reversal operations of different costs</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/minimum-number-of-elements-which-are-not-part-of-increasing-or-decreasing-subsequence-in-array/" target="_blank" rel="noopener">Minimum number of elements which are not part of Increasing or decreasing subsequence in array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/printing-brackets-matrix-chain-multiplication-problem/" target="_blank" rel="noopener">Printing brackets in Matrix Chain Multiplication Problem</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/check-people-can-vote-two-machines/" target="_blank" rel="noopener">Check if all people can vote on two machines</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/probability-knight-remain-chessboard/" target="_blank" rel="noopener">Probability of Knight to remain in the chessboard</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-arithmetic-progression-subsequences-array/" target="_blank" rel="noopener">Count of AP (Arithmetic Progression) Subsequences in an array</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/number-subsequences-form-ai-bj-ck/" target="_blank" rel="noopener">Number of subsequences of the form a^i b^j c^k</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-ways-increase-lcs-length-two-strings-one/" target="_blank" rel="noopener">Count ways to increase LCS length of two strings by one</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/count-arrays-adjacent-elements-one-divide-another/" target="_blank" rel="noopener">Count of arrays in which all adjacent elements are such that one of them divide the another</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/dynamic-programming-trees-set-2/" target="_blank" rel="noopener">Dynamic Programming on Trees</a></li></ul></li><li><ul><li style="list-style: none"><input type="checkbox"> &nbsp;&nbsp; <a href="https://www.geeksforgeeks.org/check-whether-row-column-swap-produces-maximum-size-binary-sub-matrix-1s/" target="_blank" rel="noopener">Check whether row or column swaps produce maximum size binary sub-matrix with all 1s</a></li></ul></li></ol>]]></content>
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
            <tag> 题集 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>supervisor 使用</title>
      <link href="/2018/08/29/devops/supervisor_learn/"/>
      <url>/2018/08/29/devops/supervisor_learn/</url>
      <content type="html"><![CDATA[<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y supervisor</span><br></pre></td></tr></table></figure><h3 id="启动命令"><a href="#启动命令" class="headerlink" title="启动命令"></a>启动命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/python /usr/bin/supervisord -c /etc/supervisor/supervisord.conf</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>安装完后的默认配置 <code>/etc/supervisor/supervisord.conf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">; supervisor config file</span><br><span class="line"></span><br><span class="line">[unix_http_server]</span><br><span class="line">file=/var/run/supervisor.sock   ; (the path to the socket file)</span><br><span class="line">chmod=0700                       ; sockef file mode (default 0700)</span><br><span class="line"></span><br><span class="line">[supervisord]</span><br><span class="line">logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)</span><br><span class="line">pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid)</span><br><span class="line">childlogdir=/var/log/supervisor            ; (&apos;AUTO&apos; child log dir, default $TEMP)</span><br><span class="line">environment=IPADDRESS=&quot;172.16.6.6&quot;, HOST_NAME=&quot;i-nom0vro7&quot;</span><br><span class="line"></span><br><span class="line">; the below section must remain in the config file for RPC</span><br><span class="line">; (supervisorctl/web interface) to work, additional interfaces may be</span><br><span class="line">; added by defining them in separate rpcinterface: sections</span><br><span class="line">[rpcinterface:supervisor]</span><br><span class="line">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br><span class="line"></span><br><span class="line">[supervisorctl]</span><br><span class="line">serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket</span><br><span class="line"></span><br><span class="line">; The [include] section can just contain the &quot;files&quot; setting.  This</span><br><span class="line">; setting can list multiple files (separated by whitespace or</span><br><span class="line">; newlines).  It can also contain wildcards.  The filenames are</span><br><span class="line">; interpreted as relative to this file.  Included files *cannot*</span><br><span class="line">; include files themselves.</span><br><span class="line"></span><br><span class="line">[include]</span><br><span class="line">files = /etc/supervisor/conf.d/*.conf</span><br></pre></td></tr></table></figure><p>需要监控的进程</p><ul><li>consul 微服务守护进程</li><li>coupon_web 守护进程</li><li>coupon_gateway 守护进程</li><li>coupon_trig 守护进程</li><li>coupon_bot 守护进程</li></ul><p>配置如下: (在 conf.d 目录下)</p><h5 id="consul-守护进程"><a href="#consul-守护进程" class="headerlink" title="consul 守护进程:"></a>consul 守护进程:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:consul] ; 程序名称，在 supervisorctl 中通过这个值来对程序进行一系列的操作</span><br><span class="line">autorestart=True      ; 程序异常退出后自动重启</span><br><span class="line">autostart=True        ; 在 supervisord 启动的时候也自动启动</span><br><span class="line">redirect_stderr=True  ; 把 stderr 重定向到 stdout，默认 false</span><br><span class="line">command=consul agent -data-dir /data/consul -node=common-conpous.0.13 -bind=172.16.0.13 -join=172.16.0.210 1&gt;/data/logs/out.log 2&gt;&amp;1  ; 启动命令，与手动在命令行启动的命令是一样的</span><br><span class="line">user=root           ; 用哪个用户启动</span><br><span class="line">directory=/data/caiqiu  ; 程序的启动目录</span><br><span class="line">stdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB</span><br><span class="line">stdout_logfile_backups = 20     ; stdout 日志文件备份数</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile = /data/logs/supervisord_consul.log</span><br></pre></td></tr></table></figure><h5 id="coupon-web-守护进程"><a href="#coupon-web-守护进程" class="headerlink" title="coupon_web 守护进程:"></a>coupon_web 守护进程:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:coupon_web] ; 程序名称，在 supervisorctl 中通过这个值来对程序进行一系列的操作</span><br><span class="line">autorestart=True      ; 程序异常退出后自动重启</span><br><span class="line">autostart=True        ; 在 supervisord 启动的时候也自动启动</span><br><span class="line">redirect_stderr=True  ; 把 stderr 重定向到 stdout，默认 false</span><br><span class="line">command=java -jar -Xms512m -Xmx1024m /data/common-coupon/aries-coupon-web-1.0.0-SNAPSHOT.jar --server.port=8080 --server.address=172.16.0.13 --spring.profiles.active=dev --server.tomcat.max-thread=500</span><br><span class="line">user=root           ; 用哪个用户启动</span><br><span class="line">directory=/data/caiqiu  ; 程序的启动目录</span><br><span class="line">stdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB</span><br><span class="line">stdout_logfile_backups = 20     ; stdout 日志文件备份数</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile=/data/logs/supervisord_coupon_web.log</span><br></pre></td></tr></table></figure><h5 id="coupon-gateway-守护进程"><a href="#coupon-gateway-守护进程" class="headerlink" title="coupon_gateway 守护进程:"></a>coupon_gateway 守护进程:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:coupon_gateway] ; 程序名称，在 supervisorctl 中通过这个值来对程序进行一系列的操作</span><br><span class="line">autorestart=True      ; 程序异常退出后自动重启</span><br><span class="line">autostart=True        ; 在 supervisord 启动的时候也自动启动</span><br><span class="line">redirect_stderr=True  ; 把 stderr 重定向到 stdout，默认 false</span><br><span class="line">command=java -jar -Xms512m -Xmx1024m /data/common-coupon/aries-coupon-gateway-1.0.0-SNAPSHOT.jar --server.port=9090 --server.address=172.16.0.13 --spring.profiles.active=dev --server.tomcat.max-thread=500</span><br><span class="line">user=root           ; 用哪个用户启动</span><br><span class="line">directory=/data/caiqiu  ; 程序的启动目录</span><br><span class="line">stdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB</span><br><span class="line">stdout_logfile_backups = 20     ; stdout 日志文件备份数</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile=/data/logs/supervisord_coupon_gateway.log</span><br></pre></td></tr></table></figure><h5 id="coupon-trig-守护进程"><a href="#coupon-trig-守护进程" class="headerlink" title="coupon_trig 守护进程:"></a>coupon_trig 守护进程:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:coupon_trig] ; 程序名称，在 supervisorctl 中通过这个值来对程序进行一系列的操作</span><br><span class="line">autorestart=True      ; 程序异常退出后自动重启</span><br><span class="line">autostart=True        ; 在 supervisord 启动的时候也自动启动</span><br><span class="line">redirect_stderr=True  ; 把 stderr 重定向到 stdout，默认 false</span><br><span class="line">command=java -jar -Xms512m -Xmx1024m /data/common-coupon/aries-coupon-trig-1.0.0-SNAPSHOT.jar --server.port=8090 --server.address=172.16.0.13 --spring.profiles.active=dev --server.tomcat.max-thread=500</span><br><span class="line">user=root           ; 用哪个用户启动</span><br><span class="line">directory=/data/caiqiu  ; 程序的启动目录</span><br><span class="line">stdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB</span><br><span class="line">stdout_logfile_backups = 20     ; stdout 日志文件备份数</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile=/data/logs/supervisord_coupon_trig.log</span><br></pre></td></tr></table></figure><h5 id="coupon-bot-守护进程"><a href="#coupon-bot-守护进程" class="headerlink" title="coupon_bot 守护进程:"></a>coupon_bot 守护进程:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[program:coupon_bot] ; 程序名称，在 supervisorctl 中通过这个值来对程序进行一系列的操作</span><br><span class="line">autorestart=True      ; 程序异常退出后自动重启</span><br><span class="line">autostart=True        ; 在 supervisord 启动的时候也自动启动</span><br><span class="line">redirect_stderr=True  ; 把 stderr 重定向到 stdout，默认 false</span><br><span class="line">command=java -jar -Xms512m -Xmx1024m /data/common-coupon/aries-coupon-bot-1.0.0-SNAPSHOT.jar --spring.profiles.active=dev --server.tomcat.max-thread=500</span><br><span class="line">user=root           ; 用哪个用户启动</span><br><span class="line">directory=/data/caiqiu  ; 程序的启动目录</span><br><span class="line">stdout_logfile_maxbytes = 20MB  ; stdout 日志文件大小，默认 50MB</span><br><span class="line">stdout_logfile_backups = 20     ; stdout 日志文件备份数</span><br><span class="line">; stdout 日志文件，需要注意当指定目录不存在时无法正常启动，所以需要手动创建目录（supervisord 会自动创建日志文件）</span><br><span class="line">stdout_logfile=/data/logs/supervisord_coupon_bot.log</span><br></pre></td></tr></table></figure><h4 id="supervisorctl-命令"><a href="#supervisorctl-命令" class="headerlink" title="supervisorctl 命令"></a>supervisorctl 命令</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">supervisorctl status  <span class="comment"># 查看 supervisorctl 的状态</span></span><br><span class="line"><span class="comment"># account_gateway                  RUNNING    pid 22892, uptime 1 day, 19:17:42</span></span><br><span class="line"><span class="comment"># account_web                      RUNNING    pid 22912, uptime 1 day, 19:17:41</span></span><br><span class="line"><span class="comment"># consul                           RUNNING    pid 22849, uptime 1 day, 19:17:51</span></span><br><span class="line"></span><br><span class="line">supervisorctl reload  <span class="comment"># 重新载入 supervisorctl 配置, 并且使其生效</span></span><br><span class="line"></span><br><span class="line">supervisorctl <span class="built_in">help</span>    <span class="comment"># 帮助文档</span></span><br><span class="line"><span class="comment"># default commands (type help &lt;topic&gt;):</span></span><br><span class="line"><span class="comment"># =====================================</span></span><br><span class="line"><span class="comment"># add    clear  fg        open  quit    remove  restart   start   stop  update</span></span><br><span class="line"><span class="comment"># avail  exit   maintail  pid   reload  reread  shutdown  status  tail  version</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> devops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> supervisor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>spring aop 切向编程</title>
      <link href="/2018/08/29/backend/java/spring_aop/"/>
      <url>/2018/08/29/backend/java/spring_aop/</url>
      <content type="html"><![CDATA[<h2 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h2><ol><li>什么是切向编程？</li><li>切向编程的好处</li><li>spring aop的使用</li><li>spring中类似于<code>@Cacheable</code>的实现</li></ol><p>重点讲3和4</p><h2 id="什么是切向编程？"><a href="#什么是切向编程？" class="headerlink" title="什么是切向编程？"></a>什么是切向编程？</h2><p>自己的理解：<code>在一个方法前后执行某段特定功能的代码</code></p><h2 id="切向编程的好处"><a href="#切向编程的好处" class="headerlink" title="切向编程的好处"></a>切向编程的好处</h2><p>举两个例子：</p><ol><li>web应用中，需要打印接口传入的params and return result，就需要在接口前后加上log。</li><li>将数据库查询出的数据缓存到redis中（类似于<code>@Cacheable</code>）。</li></ol><h2 id="spring-aop的使用"><a href="#spring-aop的使用" class="headerlink" title="spring aop的使用"></a>spring aop的使用</h2><p>关键点：</p><ol><li>声明切面类，使用<code>@Aspect</code>并将类注册到IOC容器中<code>@Component</code></li><li>定义切点：<code>@Pointcut(&quot;execution(public * laboratory.controller..*.*(..))&quot;)</code></li><li>定义执行方法：<code>@Before(&quot;webLog()&quot;)</code></li></ol><h3 id="切点类型"><a href="#切点类型" class="headerlink" title="切点类型"></a>切点类型</h3><p><code>@Pointcut(value = &quot;&quot;)</code><br>value的类型：<br>TOTO: 总结value类型</p><h3 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h3><p><strong>WebLogAspect：</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> laboratory.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.RequestContextHolder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span>    <span class="comment">// 1. 声明切面类</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebLogAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(public * laboratory.controller..*.*(..))"</span>) <span class="comment">// 2. 定义切点</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">webLog</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"webLog()"</span>)  <span class="comment">// 3. 定义执行方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doBefore</span><span class="params">(JoinPoint joinPoint)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 接收到请求，记录请求内容</span></span><br><span class="line">        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">        HttpServletRequest request =  attributes.getRequest();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 记录下请求内容</span></span><br><span class="line"><span class="comment">//        logger.info("URL : " + request.getRequestURL().toString());</span></span><br><span class="line"><span class="comment">//        logger.info("HTTP_METHOD : " + request.getMethod());</span></span><br><span class="line"><span class="comment">//        logger.info("IP : " + request.getRemoteAddr());</span></span><br><span class="line"><span class="comment">//        logger.info("CLASS_METHOD : " + joinPoint.getSignature().getDeclaringTypeName() + "." + joinPoint.getSignature().getName());</span></span><br><span class="line"><span class="comment">//        logger.info("ARGS : " + Arrays.toString(joinPoint.getArgs()));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterReturning</span>(returning = <span class="string">"ret"</span>, pointcut = <span class="string">"webLog()"</span>)  <span class="comment">//3. 定义执行方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterReturning</span><span class="params">(Object ret)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"resp: "</span> + JSON.toJSONString(ret));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>FirstCache:</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> laboratory.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> laboratory.annotation.FirstCacheAno;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstCache</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"@annotation(laboratory.annotation.FirstCacheAno)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">firstCache</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"firstCache()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">aroundFirstCache</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"aroundFirstCache after...."</span>);</span><br><span class="line">        MethodSignature signature = (MethodSignature) proceedingJoinPoint.getSignature();</span><br><span class="line">        FirstCacheAno firstCache = signature.getMethod().getAnnotation(FirstCacheAno.class);</span><br><span class="line">        System.out.println(<span class="string">"firstCache cacheName: "</span> + firstCache.cacheName());</span><br><span class="line">        System.out.println(<span class="string">"firstCache unless: "</span> + firstCache.unless());</span><br><span class="line">        Object ret = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ret = proceedingJoinPoint.proceed();</span><br><span class="line">            System.out.println(ret);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">            throwable.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"aroundFirstCache end...."</span>);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring aop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lombok原理分析与功能实现</title>
      <link href="/2018/08/29/backend/java/Lombok%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%E4%B8%8E%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/"/>
      <url>/2018/08/29/backend/java/Lombok%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%E4%B8%8E%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<p>参考：<a href="https://blog.mythsman.com/2017/12/19/1/" target="_blank" rel="noopener">https://blog.mythsman.com/2017/12/19/1/</a></p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ol><li>定义编译期的注解</li><li>利用JSR269 api(Pluggable Annotation Processing API )创建编译期的注解处理器</li><li>利用tools.jar的javac api处理AST(抽象语法树)</li><li>将功能注册进jar包</li></ol><h2 id="基础点"><a href="#基础点" class="headerlink" title="基础点"></a>基础点</h2><ol><li>注解</li><li>JSR269 api</li><li>javac api处理AST</li></ol><h2 id="手撸Getter"><a href="#手撸Getter" class="headerlink" title="手撸Getter"></a>手撸Getter</h2><p>实验的目的是自定义一个针对类的Getter注解，它能够读取该类的成员方法并自动生成getter方法。</p><h3 id="创建Getter注解"><a href="#创建Getter注解" class="headerlink" title="创建Getter注解"></a>创建Getter注解</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> laboratory.lombokLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Getter &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建Getter注解的处理器"><a href="#创建Getter注解的处理器" class="headerlink" title="创建Getter注解的处理器"></a>创建Getter注解的处理器</h3><h4 id="基本框架"><a href="#基本框架" class="headerlink" title="基本框架"></a>基本框架</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> laboratory.lombokLearn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.processing.*;</span><br><span class="line"><span class="keyword">import</span> javax.lang.model.SourceVersion;</span><br><span class="line"><span class="keyword">import</span> javax.lang.model.element.TypeElement;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SupportedAnnotationTypes</span>(<span class="string">"laboratory.lombokLearn.Getter"</span>)</span><br><span class="line"><span class="meta">@SupportedSourceVersion</span>(SourceVersion.RELEASE_8)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetterProcessor</span> <span class="keyword">extends</span> <span class="title">AbstractProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ProcessingEnvironment processingEnv)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.init(processingEnv);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">process</span><span class="params">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后需要着重实现两个方法，init跟process。init的主要用途是通过ProcessingEnvironment来获取编译阶段的一些环境信息;process主要是实现具体逻辑的地方，也就是对AST进行处理的地方。</p><h4 id="init-方法"><a href="#init-方法" class="headerlink" title="init 方法"></a>init 方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Messager messager;</span><br><span class="line"><span class="keyword">private</span> JavacTrees trees;</span><br><span class="line"><span class="keyword">private</span> TreeMaker treeMaker;</span><br><span class="line"><span class="keyword">private</span> Names names;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ProcessingEnvironment processingEnv)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.init(processingEnv);</span><br><span class="line">    <span class="keyword">this</span>.messager = processingEnv.getMessager();</span><br><span class="line">    <span class="keyword">this</span>.trees = JavacTrees.instance(processingEnv);</span><br><span class="line">    Context context = ((JavacProcessingEnvironment) processingEnv).getContext();</span><br><span class="line">    <span class="keyword">this</span>.treeMaker = TreeMaker.instance(context);</span><br><span class="line">    <span class="keyword">this</span>.names = Names.instance(context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>Messager主要是用来在编译期打log用的</li><li>JavacTrees提供了待处理的抽象语法树</li><li>TreeMaker封装了创建AST节点的一些方法</li><li>Names提供了创建标识符的方法</li></ol><h4 id="PROCESS方法"><a href="#PROCESS方法" class="headerlink" title="PROCESS方法"></a>PROCESS方法</h4><p>步骤大概是下面这样：</p><ol><li>利用roundEnv的getElementsAnnotatedWith方法过滤出被Getter这个注解标记的类，并存入set</li><li>遍历这个set里的每一个元素，并生成jCTree这个语法树</li><li>创建一个TreeTranslator，并重写其中的visitClassDef方法，这个方法处理遍历语法树得到的类定义部分jcClassDecl<blockquote><p>创建一个jcVariableDeclList保存类的成员变量<br>遍历jcTree的所有成员(包括成员变量和成员函数和构造函数)，过滤出其中的成员变量，并添加进jcVariableDeclList<br>将jcVariableDeclList的所有变量转换成需要添加的getter方法，并添加进jcClassDecl的成员中<br>调用默认的遍历方法遍历处理后的jcClassDecl</p></blockquote></li><li>利用上面的TreeTranslator去处理jcTree</li></ol><h2 id="summary-answer-question"><a href="#summary-answer-question" class="headerlink" title="summary (answer question)"></a>summary (answer question)</h2><h3 id="1-注解的理解"><a href="#1-注解的理解" class="headerlink" title="1. 注解的理解"></a>1. 注解的理解</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br></pre></td></tr></table></figure><p>这个是编译时运行的注解，其实我更加想知道运行时的注解，如何运作的。</p><h3 id="2-JSR269-api-是啥？"><a href="#2-JSR269-api-是啥？" class="headerlink" title="2. JSR269 api 是啥？"></a>2. JSR269 api 是啥？</h3><p>Pluggable Annotation Processing API（注解处理器）</p><h3 id="3-AST-what？"><a href="#3-AST-what？" class="headerlink" title="3. AST what？"></a>3. AST what？</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> JavacTrees trees;</span><br></pre></td></tr></table></figure><p>这个就是语法树</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jcTree.accept(）</span><br></pre></td></tr></table></figure><p>为类增加方法</p><h3 id="运行时的注解"><a href="#运行时的注解" class="headerlink" title="运行时的注解"></a>运行时的注解</h3><p>我研究一下<code>@Cacheable</code>注解吧</p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> lombok </tag>
            
            <tag> 原理 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>搭建自己的私有网络</title>
      <link href="/2018/08/29/block_chain/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C/"/>
      <url>/2018/08/29/block_chain/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C/</url>
      <content type="html"><![CDATA[<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ol><li>创建私有的以太网</li><li>在私有网部署一个简单的智能合约</li><li>使用该公约发起交易</li></ol><p><strong>注意事项：</strong> 机子内存要2G及以上</p><h2 id="setp1-安装环境"><a href="#setp1-安装环境" class="headerlink" title="setp1:  安装环境"></a>setp1:  安装环境</h2><p><strong>记录坑：</strong><br>通过 <code>apt-get install geth</code> 安装的环境只有 <code>geth</code> 命令，无 <code>bootnode</code>,  <code>evm</code>,  <code>disasm</code>,  <code>rlpdump</code>,  <code>ethtest</code>这些命令。</p><p>Ubuntu安装方式：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install software-properties-common</span><br><span class="line">sudo add-apt-repository -y ppa:ethereum/ethereum</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install ethereum</span><br></pre></td></tr></table></figure></p><p>可以选择源码安装：(前提是需要 golang &gt; 1.7)<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ethereum/go-ethereum</span><br><span class="line"><span class="built_in">cd</span> go-ethereum</span><br><span class="line">make geth</span><br></pre></td></tr></table></figure></p><h2 id="step2-创建创世块"><a href="#step2-创建创世块" class="headerlink" title="step2: 创建创世块"></a>step2: 创建创世块</h2><p>创世块是区块链的第一个块并且参数被指定在<em>genesis.json</em>文件中，内容如下：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"config"</span>: &#123;</span><br><span class="line"> <span class="attr">"chainId"</span>: <span class="number">15</span>,</span><br><span class="line"> <span class="attr">"homesteadBlock"</span>: <span class="number">0</span>,</span><br><span class="line"> <span class="attr">"eip155Block"</span>: <span class="number">0</span>,</span><br><span class="line"> <span class="attr">"eip158Block"</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> <span class="attr">"alloc"</span>  : &#123;</span><br><span class="line"> <span class="attr">"0x0000000000000000000000000000000000000001"</span>: &#123;<span class="attr">"balance"</span>: <span class="string">"111111111"</span>&#125;,</span><br><span class="line"> <span class="attr">"0x0000000000000000000000000000000000000002"</span>: &#123;<span class="attr">"balance"</span>: <span class="string">"222222222"</span>&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> <span class="attr">"coinbase"</span>  : <span class="string">"0x0000000000000000000000000000000000000000"</span>,</span><br><span class="line"> <span class="attr">"difficulty"</span> : <span class="string">"0x00001"</span>,</span><br><span class="line"> <span class="attr">"extraData"</span>  : <span class="string">""</span>,</span><br><span class="line"> <span class="attr">"gasLimit"</span>  : <span class="string">"0x2fefd8"</span>,</span><br><span class="line"> <span class="attr">"nonce"</span>  : <span class="string">"0x0000000000000107"</span>,</span><br><span class="line"> <span class="attr">"mixhash"</span>  : <span class="string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,</span><br><span class="line"> <span class="attr">"parentHash"</span> : <span class="string">"0x0000000000000000000000000000000000000000000000000000000000000000"</span>,</span><br><span class="line"> <span class="attr">"timestamp"</span>  : <span class="string">"0x00"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>注意：</strong> <code>chainId=1</code> 指向的是以太坊的主链上。因此为您的网络创建唯一的<code>chainId</code>非常重要，这样您的客户端就不会混淆私有区块链和主网络.为了说明和测试，将采矿难度(<code>difficulty</code>)设置为较低值。还要确保你指定一个唯一的随机数来开始(<code>nonce</code>)。<code>alloc</code>字段允许您使用Ether预先填充帐户。<br>现在到您创建的<code>genesis.json</code>文件的目录并初始化<code>bootnode</code>节点，您的以太坊客户端可通过该节点加入您的专用网络并与连接到您的专用网络的其他节点进行交互。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/ucsfnet/data</span><br><span class="line">geth --datadir=learn init genesis.json </span><br><span class="line">bootnode --genkey=boot.key </span><br><span class="line">bootnode --nodekey=boot.key</span><br></pre></td></tr></table></figure><p>没有bootnode的原因：see  step1</p><h2 id="step3-连接到bootnode上"><a href="#step3-连接到bootnode上" class="headerlink" title="step3: 连接到bootnode上"></a>step3: 连接到bootnode上</h2><p>开一个新终端：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@101.102.103.104</span><br><span class="line">geth --datadir=/root/ucsfnet/data --bootnodes=enode://148f3....@101.102.103.104:3031</span><br></pre></td></tr></table></figure></p><p>将<code>148f3....</code>替换为 <code>step2</code> 生成的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ bootnode --nodekey=boot.key</span><br><span class="line">INFO [03-14|16:30:33] UDP listener up                          self=enode://c591c837ff804c4bdb6a5a8d02e5343d5f96fbf6e198aaf05f91aeb0a9b781e3b6fb95124ac8e4ee1b99ca64df2c93052c54bc02ee1dada70d38bd4a956d4ac4@[::]:30301</span><br></pre></td></tr></table></figure></p><h2 id="step4-创建一个新账号并查询余额"><a href="#step4-创建一个新账号并查询余额" class="headerlink" title="step4: 创建一个新账号并查询余额"></a>step4: 创建一个新账号并查询余额</h2><p>新开一个终端：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth attach /root/ucsfnet/data/geth.ipc</span><br></pre></td></tr></table></figure></p><p>连接到网络中：<br>查看有哪些账户,   创建一个新账号密码为：<em>mypassword</em> ,  查询用户余额<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; eth.accounts</span><br><span class="line">[]</span><br><span class="line"></span><br><span class="line">&gt; personal.newAccount(<span class="string">"mypassword"</span>)</span><br><span class="line"><span class="string">"0x73c62b30d6dbe998313384f1c98528c1d372b075"</span></span><br><span class="line"></span><br><span class="line">&gt; web3.fromWei(eth.getBalance(eth.accounts\[0\]), <span class="string">"ether"</span>)</span><br><span class="line">0</span><br></pre></td></tr></table></figure></p><p>那个<code>0x</code>打头的就是账户地址：<em>0x73c62b30d6dbe998313384f1c98528c1d372b075</em></p><h2 id="step5-在私链上挖矿"><a href="#step5-在私链上挖矿" class="headerlink" title="step5: 在私链上挖矿"></a>step5: 在私链上挖矿</h2><p>挖矿有2目的：</p><blockquote><ol><li>需要为矿工的算力，提供gas</li><li>采矿需要将你的交易写到区块链中</li></ol></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geth --datadir=/root/ucsfnet/data --mine --minerthreads=1 --etherbase=0x...</span><br></pre></td></tr></table></figure><p><em>etherbase</em> 参数应该是<code>step4</code>中的钱包地址<br><em>开始挖矿后会有一段时间加载数据，耗CPU比较严重。</em></p><h2 id="step6-开发一个简单的智能合约"><a href="#step6-开发一个简单的智能合约" class="headerlink" title="step6: 开发一个简单的智能合约"></a>step6: 开发一个简单的智能合约</h2><p>首先需要安装编译器：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ethereum/ethereum</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install solc</span><br></pre></td></tr></table></figure></p><p>其次，创建合约，并命名为 <code>greeter.sol</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">contract mortal &#123;</span><br><span class="line"></span><br><span class="line">/* Define variable owner of the type address*/</span><br><span class="line"> address owner;</span><br><span class="line"></span><br><span class="line">/* this function is executed at initialization and sets the owner of the contract */</span><br><span class="line"> function mortal() &#123; owner = msg.sender; &#125;</span><br><span class="line"></span><br><span class="line">/* Function to recover the funds on the contract */</span><br><span class="line"> function kill() &#123; if (msg.sender == owner) selfdestruct(owner); &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract greeter is mortal &#123;</span><br><span class="line"> /* define variable greeting of the type string */</span><br><span class="line"> string greeting;</span><br><span class="line"></span><br><span class="line">/* this runs when the contract is executed */</span><br><span class="line"> function greeter(string _greeting) public &#123;</span><br><span class="line"> greeting = &quot;UCSFnet lives!&quot;;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">/* main function */</span><br><span class="line"> function greet() constant returns (string) &#123;</span><br><span class="line"> return greeting;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译合约：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">solc --bin --abi  -o /root/<span class="built_in">test</span> /root/<span class="built_in">test</span>/greeter.sol</span><br><span class="line"></span><br><span class="line"><span class="comment">## 输出文件</span></span><br><span class="line">$ ls</span><br><span class="line">greeter.abi  greeter.bin  greeter.sol  mortal.abi  mortal.bin</span><br></pre></td></tr></table></figure></p><p>在编译命令行中， <code>--bin --abi</code> 是分别生成 EVM（Ethereum Virtual Machine：以太坊虚拟机）字节码 和 ABI（Application Binary Inferface：应用二进制接口）文件。 <code>-o</code> 指定生成后存放的路径</p><p><strong>合约内容先不研究</strong></p><h2 id="step7-部署GREETER合约到私网"><a href="#step7-部署GREETER合约到私网" class="headerlink" title="step7: 部署GREETER合约到私网"></a>step7: 部署GREETER合约到私网</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> _greeting = <span class="string">'Jie lives!'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> browser_ballot_sol_greeterContract = web3.eth.contract([&#123;</span><br><span class="line">    <span class="string">"constant"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"inputs"</span>: [],</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"kill"</span>,</span><br><span class="line">    <span class="string">"outputs"</span>: [],</span><br><span class="line">    <span class="string">"payable"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"function"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="string">"constant"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"inputs"</span>: [],</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"greet"</span>,</span><br><span class="line">    <span class="string">"outputs"</span>: [&#123;<span class="string">"name"</span>: <span class="string">""</span>, <span class="string">"type"</span>: <span class="string">"string"</span>&#125;],</span><br><span class="line">    <span class="string">"payable"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"function"</span></span><br><span class="line">&#125;, &#123;<span class="string">"inputs"</span>: [&#123;<span class="string">"name"</span>: <span class="string">"_greeting"</span>, <span class="string">"type"</span>: <span class="string">"string"</span>&#125;], <span class="string">"payable"</span>: <span class="literal">false</span>, <span class="string">"type"</span>: <span class="string">"constructor"</span>&#125;]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> browser_ballot_sol_greeter = browser_ballot_sol_greeterContract.new(</span><br><span class="line">    _greeting,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">from</span>: web3.eth.accounts[<span class="number">0</span>],</span><br><span class="line"></span><br><span class="line">        data: <span class="string">'0x6060604052341561000f57600080fd5b6040516103dd3803806103dd833981016040528080518201919050505b5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b6040805190810160405280600d81526020017f48656c6c6f2c20576f726c642100000000000000000000000000000000000000815250600190805190602001906100b99291906100c1565b505b50610166565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061010257805160ff1916838001178555610130565b82800160010185558215610130579182015b8281111561012f578251825591602001919060010190610114565b5b50905061013d9190610141565b5090565b61016391905b8082111561015f576000816000905550600101610147565b5090565b90565b610268806101756000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806341c0e1b514610049578063cfae32171461005e575b600080fd5b341561005457600080fd5b61005c6100ed565b005b341561006957600080fd5b61007161017f565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100b25780820151818401525b602081019050610096565b50505050905090810190601f1680156100df5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561017c576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b610187610228565b60018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561021d5780601f106101f25761010080835404028352916020019161021d565b820191906000526020600020905b81548152906001019060200180831161020057829003601f168201915b505050505090505b90565b6020604051908101604052806000815250905600a165627a7a7230582069d50e4318daa30d3f74bb817c3b0cb732c4ec6a493eb108266c548906c8b6d70029'</span>,</span><br><span class="line"></span><br><span class="line">        gas: <span class="string">'1000000'</span></span><br><span class="line"></span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">e, contract</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(e, contract);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> contract.address !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'Contract mined! address: '</span> + contract.address + <span class="string">' transactionHash: '</span> + contract.transactionHash);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>数据看着填吧，启动一个终端，连接到私链上<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh root@101.102.103.104 </span><br><span class="line">geth attach /root/ucsfnet/data/geth.ipc </span><br><span class="line">&gt; web3.fromWei(eth.getBalance(eth.accounts[0]), <span class="string">"ether"</span>)</span><br><span class="line">&gt; personal.unlockAccount(eth.accounts[0], <span class="string">"mypassword"</span>)</span><br></pre></td></tr></table></figure></p><p>部署合约需要account上有余额，且account处于unlock状态下。<br>使用下面的命令载入合约：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadScript(<span class="string">'myContract.js'</span>)</span><br></pre></td></tr></table></figure></p><p><strong>注意：</strong>需要有矿工挖矿保证交易被挖到<br>将会得到如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Contract mined! address: 0xa76d017c3035dcf15e28b315477f3f19ae275433 transactionHash: 0x732e84efc03638767efc9a46738161c04d561a92cc2e631c63287e63ef38995b</span><br></pre></td></tr></table></figure></p><p>这样合约就部署完成了</p><h2 id="与合同的交换"><a href="#与合同的交换" class="headerlink" title="与合同的交换"></a>与合同的交换</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">var</span> abi = <span class="string">'[&#123;"constant":false,"inputs":[],"name":"kill","outputs":[],"payable":false,"type":"function"&#125;,&#123;"constant":true,"inputs":[],"name":"greet","outputs":[&#123;"name":"","type":"string"&#125;],"payable":false,"type":"function"&#125;,&#123;"inputs":[&#123;"name":"_greeting","type":"string"&#125;],"payable":false,"type":"constructor"&#125;]'</span></span><br><span class="line">&gt; <span class="keyword">var</span> abi = <span class="built_in">JSON</span>.parse(abi)</span><br><span class="line">&gt; <span class="keyword">var</span> contract = web3.eth.contract(abi)</span><br><span class="line">&gt; <span class="keyword">var</span> c = contract.at(<span class="string">"0xa76d017c3035dcf15e28b315477f3f19ae275433"</span>)</span><br><span class="line">&gt; c.greet()</span><br></pre></td></tr></table></figure><p>会有一个输出：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UCSFnet lives!</span><br></pre></td></tr></table></figure></p><p> 我这输出的是：”Hello, World!”  ….</p><h2 id="博客推荐"><a href="#博客推荐" class="headerlink" title="博客推荐"></a>博客推荐</h2><p><a href="https://ocalog.com/post/10/" target="_blank" rel="noopener">Nice low-level description of networking in Ethereum (uses the Python-based client):</a></p><p><a href="https://github.com/ethereum/go-ethereum/wiki/Setting-up-private-network-or-local-cluster" target="_blank" rel="noopener">Setting up private network or local cluster</a></p><p><a href="https://github.com/ethereum/go-ethereum/wiki/Managing-your-accounts" target="_blank" rel="noopener">Managing your accounts</a></p><p><a href="https://github.com/ethereum/go-ethereum/wiki/Connecting-to-the-network" target="_blank" rel="noopener">Connecting to the network</a></p><p><a href="https://github.com/ethereum/go-ethereum" target="_blank" rel="noopener">The Go Ethereum client</a></p><p><a href="https://ethereum.org/cli" target="_blank" rel="noopener">Official Ethereum command line tool documentation</a></p><p>参考（算是翻译）：<br><a href="https://omarmetwally.blog/2017/07/25/how-to-create-a-private-ethereum-network/" target="_blank" rel="noopener">How to create a private Ethereum network</a></p><h2 id="下一个目标"><a href="#下一个目标" class="headerlink" title="下一个目标"></a>下一个目标</h2><p><a href="https://omarmetwally.blog/2017/09/27/how-to-connect-3-ethereum-nodes-in-a-private-ethereum-network/" target="_blank" rel="noopener">https://omarmetwally.blog/2017/09/27/how-to-connect-3-ethereum-nodes-in-a-private-ethereum-network/</a></p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blockchain </tag>
            
            <tag> 以太坊 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Zombie T3</title>
      <link href="/2018/08/29/block_chain/contractLearn/Zombie_Con_Ch3/"/>
      <url>/2018/08/29/block_chain/contractLearn/Zombie_Con_Ch3/</url>
      <content type="html"><![CDATA[<p>涉及内容：<code>智能协议的所有权</code>，<code>Gas的花费</code>，<code>代码优化</code>，和<code>代码安全</code></p><h2 id="ch1-智能协议的永固性"><a href="#ch1-智能协议的永固性" class="headerlink" title="ch1. 智能协议的永固性"></a>ch1. 智能协议的永固性</h2><p>在你把智能协议传上以太坊之后，它就变得<code>不可更改</code>, 这种永固性意味着你的代码永远不能被调整或更新。</p><p><strong>尽量不要写死代码</strong></p><h2 id="ch2-Ownable-Contracts"><a href="#ch2-Ownable-Contracts" class="headerlink" title="ch2. Ownable Contracts"></a>ch2. Ownable Contracts</h2><p>OpenZeppelin库的Ownable 合约：OpenZeppelin 是主打安保和社区审查的智能合约库，您可以在自己的 DApps中引用。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @title Ownable</span><br><span class="line"> * @dev The Ownable contract has an owner address, and provides basic authorization control</span><br><span class="line"> * functions, this simplifies the implementation of &quot;user permissions&quot;.</span><br><span class="line"> */</span><br><span class="line">contract Ownable &#123;</span><br><span class="line">  address public owner;</span><br><span class="line">  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * @dev The Ownable constructor sets the original `owner` of the contract to the sender</span><br><span class="line">   * account.</span><br><span class="line">   */</span><br><span class="line">  function Ownable() public &#123;</span><br><span class="line">    owner = msg.sender;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * @dev Throws if called by any account other than the owner.</span><br><span class="line">   */</span><br><span class="line">  modifier onlyOwner() &#123;</span><br><span class="line">    require(msg.sender == owner);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * @dev Allows the current owner to transfer control of the contract to a newOwner.</span><br><span class="line">   * @param newOwner The address to transfer ownership to.</span><br><span class="line">   */</span><br><span class="line">  function transferOwnership(address newOwner) public onlyOwner &#123;</span><br><span class="line">    require(newOwner != address(0));</span><br><span class="line">    OwnershipTransferred(owner, newOwner);</span><br><span class="line">    owner = newOwner;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>构造函数: <code>function Ownable()</code> 是一个 constructor (构造函数)，构造函数不是必须的，它与合约同名，构造函数一生中唯一的一次执行，就是在合约最初被创建的时候。</p></li><li><p>函数修饰符：<code>modifier onlyOwner()</code> 修饰符跟函数很类似，不过是用来修饰其他已有函数用的， 在其他语句执行前，为它检查下先验条件。<code>_;</code> 类似于 ruby 中的 <code>yield</code></p></li></ul><p>所以<code>Ownable</code>合约基本都会这么干：</p><ol><li>合约创建，构造函数先行，将其 owner 设置为msg.sender（其部署者）</li><li>为它加上一个修饰符 onlyOwner，它会限制陌生人的访问，将访问某些函数的权限锁定在 owner 上。</li><li>允许将合约所有权转让给他人。</li></ol><h2 id="ch4-Gas"><a href="#ch4-Gas" class="headerlink" title="ch4. Gas"></a>ch4. Gas</h2><p><strong>重要概念：</strong> <code>Gas - 驱动以太坊DApps的能源</code></p><p>在 Solidity 中，你的用户想要每次执行你的 DApp 都需要支付一定的 gas，gas 可以用以太币购买，因此，用户每次跑 DApp 都得花费以太币。</p><p>一个 DApp 收取多少 gas 取决于功能逻辑的复杂程度。每个操作背后，都在计算完成这个操作所需要的计算资源，（比如，存储数据就比做个加法运算贵得多）， 一次操作所需要花费的 gas 等于这个操作背后的所有运算花销的总和。</p><p>由于运行你的程序需要花费用户的真金白银，在以太坊中代码的编程语言，比其他任何编程语言都更强调优化。同样的功能，使用笨拙的代码开发的程序，比起经过精巧优化的代码来，运行花费更高，这显然会给成千上万的用户带来大量不必要的开销。</p><h3 id="为什么要用-gas-来驱动？"><a href="#为什么要用-gas-来驱动？" class="headerlink" title="为什么要用 gas 来驱动？"></a>为什么要用 gas 来驱动？</h3><p>以太坊就像一个巨大、缓慢、但非常安全的电脑。当你运行一个程序的时候，网络上的每一个节点都在进行相同的运算，以验证它的输出 —— 这就是所谓的”去中心化“ 由于数以千计的节点同时在验证着每个功能的运行，这可以确保它的数据不会被被监控，或者被刻意修改。</p><p>可能会有用户用无限循环堵塞网络，抑或用密集运算来占用大量的网络资源，为了防止这种事情的发生，以太坊的创建者为以太坊上的资源制定了价格，想要在以太坊上运算或者存储，你需要先付费。</p><h3 id="省-gas-的招数：结构封装-（Struct-packing）"><a href="#省-gas-的招数：结构封装-（Struct-packing）" class="headerlink" title="省 gas 的招数：结构封装 （Struct packing）"></a>省 gas 的招数：结构封装 （Struct packing）</h3><p>在第1课中，我们提到除了基本版的 uint 外，还有其他变种 uint：uint8，uint16，uint32等。</p><p>通常情况下我们不会考虑使用 unit 变种，因为无论如何定义 uint的大小，Solidity 为它保留256位的存储空间。例如，使用 uint8 而不是uint（uint256）不会为你节省任何 gas。</p><p>除非，把 unit 绑定到 struct 里面。</p><p>如果一个 struct 中有多个 uint，则尽可能使用较小的 uint, Solidity 会将这些 uint 打包在一起，从而占用较少的存储空间。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">struct NormalStruct &#123;</span><br><span class="line">  uint a;</span><br><span class="line">  uint b;</span><br><span class="line">  uint c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">struct MiniMe &#123;</span><br><span class="line">  uint32 a;</span><br><span class="line">  uint32 b;</span><br><span class="line">  uint c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>// 因为使用了结构打包，<code>mini</code> 比 <code>normal</code> 占用的空间更少<br>NormalStruct normal = NormalStruct(10, 20, 30);<br>MiniMe mini = MiniMe(10, 20, 30);<br>所以，当 uint 定义在一个 struct 中的时候，尽量使用最小的整数子类型以节约空间。 并且把同样类型的变量放一起（即在 struct 中将把变量按照类型依次放置），这样 Solidity 可以将存储空间最小化。例如，有两个 struct：</p><p>uint c; uint32 a; uint32 b; 和 uint32 a; uint c; uint32 b;</p><p>前者比后者需要的gas更少，因为前者把uint32放一起了。</p><h2 id="ch5-时间单位"><a href="#ch5-时间单位" class="headerlink" title="ch5. 时间单位"></a>ch5. 时间单位</h2><p>Solidity 使用自己的本地时间单位。</p><p>变量 <code>now</code> 将返回当前的unix时间戳（自1970年1月1日以来经过的秒数）。</p><p>Solidity 还包含秒(seconds)，分钟(minutes)，小时(hours)，天(days)，周(weeks) 和 年(years) 等时间单位。它们都会转换成对应的秒数放入 uint 中。所以 1分钟 就是 60，1小时是 3600（60秒×60分钟），1天是86400（24小时×60分钟×60秒），以此类推。</p><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">uint lastUpdated;</span><br><span class="line"></span><br><span class="line">// 将‘上次更新时间’ 设置为 ‘现在’</span><br><span class="line">function updateTimestamp() public &#123;</span><br><span class="line">  lastUpdated = now;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 如果到上次`updateTimestamp` 超过5分钟，返回 &apos;true&apos;</span><br><span class="line">// 不到5分钟返回 &apos;false&apos;</span><br><span class="line">function fiveMinutesHavePassed() public view returns (bool) &#123;</span><br><span class="line">  return (now &gt;= (lastUpdated + 5 minutes));</span><br></pre></td></tr></table></figure></p><h2 id="ch6-结构体作为参数传入"><a href="#ch6-结构体作为参数传入" class="headerlink" title="ch6. 结构体作为参数传入"></a>ch6. 结构体作为参数传入</h2><p>由于结构体的存储指针可以以参数的方式传递给一个 private 或 internal 的函数，因此结构体可以在多个函数之间相互传递。</p><p>遵循这样的语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function _doStuff(Zombie storage _zombie) internal &#123;</span><br><span class="line">  // do stuff with _zombie</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ch7-公有函数和安全性"><a href="#ch7-公有函数和安全性" class="headerlink" title="ch7. 公有函数和安全性"></a>ch7. 公有函数和安全性</h2><p>你必须仔细地检查所有声明为 public 和 external的函数，一个个排除用户滥用它们的可能，谨防安全漏洞。请记住，如果这些函数没有类似 onlyOwner 这样的函数修饰符，用户能利用各种可能的参数去调用它们。</p><h2 id="ch8-进一步了解函数修饰符"><a href="#ch8-进一步了解函数修饰符" class="headerlink" title="ch8. 进一步了解函数修饰符"></a>ch8. 进一步了解函数修饰符</h2><h3 id="带参数的函数修饰符"><a href="#带参数的函数修饰符" class="headerlink" title="带参数的函数修饰符"></a>带参数的函数修饰符</h3><p>之前我们已经读过一个简单的函数修饰符了：onlyOwner。函数修饰符也可以带参数。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 存储用户年龄的映射</span><br><span class="line">mapping (uint =&gt; uint) public age;</span><br><span class="line"></span><br><span class="line">// 限定用户年龄的修饰符</span><br><span class="line">modifier olderThan(uint _age, uint _userId) &#123;</span><br><span class="line">  require(age[_userId] &gt;= _age);</span><br><span class="line">  _;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 必须年满16周岁才允许开车 (至少在美国是这样的).</span><br><span class="line">// 我们可以用如下参数调用`olderThan` 修饰符:</span><br><span class="line">function driveCar(uint _userId) public olderThan(16, _userId) &#123;</span><br><span class="line">  // 其余的程序逻辑</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看到了吧， olderThan 修饰符可以像函数一样接收参数，是“宿主”函数 driveCar 把参数传递给它的修饰符的。</p><h2 id="ch10-利用-‘View’-函数节省-Gas"><a href="#ch10-利用-‘View’-函数节省-Gas" class="headerlink" title="ch10. 利用 ‘View’ 函数节省 Gas"></a>ch10. 利用 ‘View’ 函数节省 Gas</h2><h3 id="“view”-函数不花-“gas”"><a href="#“view”-函数不花-“gas”" class="headerlink" title="“view” 函数不花 “gas”"></a>“view” 函数不花 “gas”</h3><p>当玩家从外部调用一个view函数，是不需要支付一分 gas 的。</p><p>这是因为 view 函数不会真正改变区块链上的任何数据 - <code>它们只是读取</code>。因此用 view 标记一个函数，意味着告诉 web3.js，<code>运行这个函数只需要查询你的本地以太坊节点</code>，而不需要在区块链上创建一个事务（事务需要运行在每个节点上，因此花费 gas）。</p><p>稍后我们将介绍如何在自己的节点上设置 web3.js。但现在，你关键是要记住，在所能只读的函数上标记上表示“只读”的“external view 声明，就能为你的玩家减少在 DApp 中 gas 用量。</p><p>注意：如果一个 view 函数在另一个函数的内部被调用，而调用函数与 view 函数的不属于同一个合约，也会产生调用成本。这是因为如果主调函数在以太坊创建了一个事务，它仍然需要逐个节点去验证。所以标记为 view 的函数只有在外部调用时才是免费的。</p><h2 id="ch11-存储非常昂贵"><a href="#ch11-存储非常昂贵" class="headerlink" title="ch11. 存储非常昂贵"></a>ch11. 存储非常昂贵</h2><p>Solidity 使用storage(存储)是相当昂贵的，”写入“操作尤其贵。</p><p>这是因为，无论是写入还是更改一段数据， 这都将永久性地写入区块链。”永久性“啊！需要在全球数千个节点的硬盘上存入这些数据，随着区块链的增长，拷贝份数更多，存储量也就越大。这是需要成本的！</p><p>为了降低成本，不到万不得已，避免将数据写入存储。这也会导致效率低下的编程逻辑 - 比如每次调用一个函数，都需要在 memory(内存) 中重建一个数组，而不是简单地将上次计算的数组给存储下来以便快速查找。</p><p>在大多数编程语言中，遍历大数据集合都是昂贵的。但是在 Solidity 中，使用一个标记了external view的函数，遍历比 storage 要便宜太多，因为 view 函数不会产生任何花销。 （gas可是真金白银啊！）。</p><p>我们将在下一章讨论for循环，现在我们来看一下看如何如何在内存中声明数组。</p><p>在内存中声明数组<br>在数组后面加上 memory关键字， 表明这个数组是仅仅在内存中创建，不需要写入外部存储，并且在函数调用结束时它就解散了。与在程序结束时把数据保存进 storage 的做法相比，内存运算可以大大节省gas开销 – 把这数组放在view里用，完全不用花钱。</p><p>以下是申明一个内存数组的例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function getArray() external pure returns(uint[]) &#123;</span><br><span class="line">  // 初始化一个长度为3的内存数组</span><br><span class="line">  uint[] memory values = new uint[](3);</span><br><span class="line">  // 赋值</span><br><span class="line">  values.push(1);</span><br><span class="line">  values.push(2);</span><br><span class="line">  values.push(3);</span><br><span class="line">  // 返回数组</span><br><span class="line">  return values;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个小例子展示了一些语法规则，下一章中，我们将通过一个实际用例，展示它和 for 循环结合的做法。</p><p>注意：内存数组 必须 用长度参数（在本例中为3）创建。目前不支持 array.push()之类的方法调整数组大小，在未来的版本可能会支持长度修改。</p><h2 id="使用-for-循环"><a href="#使用-for-循环" class="headerlink" title="使用 for 循环"></a>使用 for 循环</h2><p>for循环的语法在 Solidity 和 JavaScript 中类似。</p><p>来看一个创建偶数数组的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function getEvens() pure external returns(uint[]) &#123;</span><br><span class="line">  uint[] memory evens = new uint[](5);</span><br><span class="line">  // 在新数组中记录序列号</span><br><span class="line">  uint counter = 0;</span><br><span class="line">  // 在循环从1迭代到10：</span><br><span class="line">  for (uint i = 1; i &lt;= 10; i++) &#123;</span><br><span class="line">    // 如果 `i` 是偶数...</span><br><span class="line">    if (i % 2 == 0) &#123;</span><br><span class="line">      // 把它加入偶数数组</span><br><span class="line">      evens[counter] = i;</span><br><span class="line">      //索引加一， 指向下一个空的‘even’</span><br><span class="line">      counter++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return evens;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这个函数将返回一个形为 [2,4,6,8,10] 的数组。</p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blockchain </tag>
            
            <tag> 智能合约 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2018/08/29/block_chain/%E5%9C%A8%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%90%AD%E5%BB%BA3%E4%B8%AA%E4%BB%A5%E4%B8%8A%E8%8A%82%E7%82%B9/"/>
      <url>/2018/08/29/block_chain/%E5%9C%A8%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%90%AD%E5%BB%BA3%E4%B8%AA%E4%BB%A5%E4%B8%8A%E8%8A%82%E7%82%B9/</url>
      <content type="html"><![CDATA[<h1 id="在私有网络上搭建3个以上节点"><a href="#在私有网络上搭建3个以上节点" class="headerlink" title="在私有网络上搭建3个以上节点"></a>在私有网络上搭建3个以上节点</h1><h2 id="Step-1-创建创世块"><a href="#Step-1-创建创世块" class="headerlink" title="Step 1: 创建创世块"></a>Step 1: 创建创世块</h2><h2 id="Step-2-删除旧数据"><a href="#Step-2-删除旧数据" class="headerlink" title="Step 2: 删除旧数据"></a>Step 2: 删除旧数据</h2><h2 id="Step-3-重新初始化创世块"><a href="#Step-3-重新初始化创世块" class="headerlink" title="Step 3: 重新初始化创世块"></a>Step 3: 重新初始化创世块</h2><h2 id="Step-4-发现每个节点的enode地址"><a href="#Step-4-发现每个节点的enode地址" class="headerlink" title="Step 4: 发现每个节点的enode地址"></a>Step 4: 发现每个节点的enode地址</h2><h2 id="Step-5-在每个节点上创建static-nodes-json文件"><a href="#Step-5-在每个节点上创建static-nodes-json文件" class="headerlink" title="Step 5: 在每个节点上创建static-nodes.json文件"></a>Step 5: 在每个节点上创建static-nodes.json文件</h2><h2 id="Step-6-启动私人网络"><a href="#Step-6-启动私人网络" class="headerlink" title="Step 6: 启动私人网络"></a>Step 6: 启动私人网络</h2><h2 id="Step-7-在私网上挖掘"><a href="#Step-7-在私网上挖掘" class="headerlink" title="Step 7: 在私网上挖掘"></a>Step 7: 在私网上挖掘</h2>]]></content>
      
      
    </entry>
    
    <entry>
      <title>redis ops learn</title>
      <link href="/2018/08/29/backend/go/redis/redis_start_learn/"/>
      <url>/2018/08/29/backend/go/redis/redis_start_learn/</url>
      <content type="html"><![CDATA[<h2 id="连接测试"><a href="#连接测试" class="headerlink" title="连接测试"></a>连接测试</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"github.com/go-redis/redis"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">client := redis.NewClient(&amp;redis.Options&#123;</span><br><span class="line">Addr: <span class="string">"localhost:6379"</span>,</span><br><span class="line">Password: <span class="string">""</span>,      <span class="comment">//默认空密码</span></span><br><span class="line">DB: <span class="number">0</span>,             <span class="comment">//使用默认数据库</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">defer</span> client.Close()       <span class="comment">//最后关闭</span></span><br><span class="line"></span><br><span class="line">pong, err := client.Ping().Result()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">"Connected result: "</span>, pong)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ops-strings"><a href="#ops-strings" class="headerlink" title="ops: strings"></a>ops: strings</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ops: strings</span></span><br><span class="line"><span class="comment">//// set</span></span><br><span class="line">client.Set(<span class="string">"hello"</span>, <span class="string">"hello redis"</span>,<span class="number">0</span>) <span class="comment">//忽略错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//// get string</span></span><br><span class="line">str := client.Get(<span class="string">"hello"</span>)</span><br><span class="line">fmt.Println(str)</span><br><span class="line"></span><br><span class="line"><span class="comment">//// del string</span></span><br><span class="line">client.Del(<span class="string">"strtest"</span>)</span><br></pre></td></tr></table></figure><h2 id="ops-lists"><a href="#ops-lists" class="headerlink" title="ops: lists"></a>ops: lists</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ops: lists</span></span><br><span class="line"><span class="comment">//// push</span></span><br><span class="line">client.LPush(<span class="string">"list"</span>,<span class="string">"one"</span>,<span class="string">"two"</span>,<span class="string">"three"</span>) <span class="comment">//rpush则在尾部插入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//// rm, pop</span></span><br><span class="line">client.LRem(<span class="string">"list"</span>,<span class="number">2</span>,<span class="string">"three"</span>) <span class="comment">//删除list中前2个value为 ‘three’的元素</span></span><br><span class="line">client.LPop(<span class="string">"list"</span>) <span class="comment">//删除头部的值，同理RPop删除尾部的值。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// range</span></span><br><span class="line">list, _ := client.LRange(<span class="string">"list"</span>, <span class="number">0</span>, <span class="number">2</span>).Result()</span><br><span class="line">fmt.Println(<span class="string">"List: "</span>, list)</span><br></pre></td></tr></table></figure><h2 id="ops-hashes"><a href="#ops-hashes" class="headerlink" title="ops: hashes"></a>ops: hashes</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hashes</span></span><br><span class="line"><span class="comment">//// set</span></span><br><span class="line">user := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">user[<span class="string">"name"</span>] = <span class="string">"jim"</span></span><br><span class="line">user[<span class="string">"gender"</span>] = <span class="string">"man"</span></span><br><span class="line">user[<span class="string">"age"</span>] = <span class="number">23</span></span><br><span class="line">client.HMSet(<span class="string">"user"</span>,user)</span><br><span class="line"></span><br><span class="line"><span class="comment">//// set</span></span><br><span class="line">client.HSet(<span class="string">"user"</span>, <span class="string">"name"</span>,<span class="string">"tom"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//// get</span></span><br><span class="line">name := client.HGet(<span class="string">"user"</span>,<span class="string">"name"</span>)</span><br><span class="line">fmt.Print(name)</span><br><span class="line"></span><br><span class="line"><span class="comment">//// getAll</span></span><br><span class="line">hash, _ := client.HGetAll(<span class="string">"user"</span>).Result()</span><br><span class="line"><span class="keyword">for</span> k, v:= <span class="keyword">range</span> hash&#123;</span><br><span class="line">fmt.Printf(<span class="string">"key: %v, value: %v "</span>,k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考: <a href="https://www.jianshu.com/p/4045a3721b3c" target="_blank" rel="noopener">https://www.jianshu.com/p/4045a3721b3c</a></p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>grpc start learn</title>
      <link href="/2018/08/29/backend/go/grpc/grpc_start_learn/"/>
      <url>/2018/08/29/backend/go/grpc/grpc_start_learn/</url>
      <content type="html"><![CDATA[<h1 id="ex-helloworld-start"><a href="#ex-helloworld-start" class="headerlink" title="ex helloworld start"></a>ex helloworld start</h1><h2 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h2><p>建立流程:</p><ol><li>建 proto3 文件, 定义 service</li><li>service 开发</li><li>client 开发</li></ol><h2 id="1-proto-文件"><a href="#1-proto-文件" class="headerlink" title="1. proto 文件"></a>1. proto 文件</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The greeting service definition.</span></span><br><span class="line">service Greeter &#123;</span><br><span class="line">  <span class="comment">// Sends a greeting</span></span><br><span class="line">  rpc SayHello (HelloRequest) returns (HelloReply) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The request message containing the user's name.</span></span><br><span class="line">message HelloRequest &#123;</span><br><span class="line">  <span class="keyword">string</span> name = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The response message containing the greetings</span></span><br><span class="line">message HelloReply &#123;</span><br><span class="line">  <span class="keyword">string</span> message = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义了一个 service Greeter , 参数: SayHello, return: HelloReply</p><h2 id="2-service-开发"><a href="#2-service-开发" class="headerlink" title="2. service 开发"></a>2. service 开发</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">port = <span class="string">":50051"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// server is used to implement helloworld.GreeterServer.</span></span><br><span class="line"><span class="keyword">type</span> server <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现 helloworld.GreeterServer 方法</span></span><br><span class="line"><span class="comment">// SayHello implements helloworld.GreeterServer</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *server)</span> <span class="title">SayHello</span><span class="params">(ctx context.Context, in *pb.HelloRequest)</span> <span class="params">(*pb.HelloReply, error)</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;pb.HelloReply&#123;Message: <span class="string">"Hello "</span> + in.Name&#125;, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">lis, err := net.Listen(<span class="string">"tcp"</span>, port)         <span class="comment">// 开启监听</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"failed to listen: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">s := grpc.NewServer()                       <span class="comment">// 建一个 grpc Server</span></span><br><span class="line">pb.RegisterGreeterServer(s, &amp;server&#123;&#125;)      <span class="comment">// 将 RegisterGreeterServer 服务绑定到 grpc 上</span></span><br><span class="line"><span class="comment">// Register reflection service on gRPC server.</span></span><br><span class="line">reflection.Register(s)                      <span class="comment">// 将服务注册到 rpc 上</span></span><br><span class="line"><span class="keyword">if</span> err := s.Serve(lis); err != <span class="literal">nil</span> &#123;        <span class="comment">// s.Serve(lis) 是将 grpc 服务绑定监听端口</span></span><br><span class="line">log.Fatalf(<span class="string">"failed to serve: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>流程:</p><blockquote><ol><li>开一个监听端口</li><li>建立一个 rpc 服务</li><li>将服务绑定到 rpc 上</li><li>将服务注册到 rpc 上</li><li>绑定 grpc 服务 和 端口监听</li></ol></blockquote><h2 id="3-client-使用-grpc-服务"><a href="#3-client-使用-grpc-服务" class="headerlink" title="3. client 使用 grpc 服务"></a>3. client 使用 grpc 服务</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line"></span><br><span class="line"><span class="string">"golang.org/x/net/context"</span></span><br><span class="line"><span class="string">"google.golang.org/grpc"</span></span><br><span class="line">pb <span class="string">"google.golang.org/grpc/examples/helloworld/helloworld"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">address     = <span class="string">"localhost:50051"</span></span><br><span class="line">defaultName = <span class="string">"jie"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// Set up a connection to the server.</span></span><br><span class="line">conn, err := grpc.Dial(address, grpc.WithInsecure()) <span class="comment">// 创建客户端</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"did not connect: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> conn.Close()                                  <span class="comment">// 延迟关闭连接</span></span><br><span class="line">c := pb.NewGreeterClient(conn)                      <span class="comment">// 新建一个Greeter连接客户端</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Contact the server and print out its response.</span></span><br><span class="line">name := defaultName</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(os.Args) &gt; <span class="number">1</span> &#123;</span><br><span class="line">name = os.Args[<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line">ctx, cancel := context.WithTimeout(context.Background(), time.Second) <span class="comment">// 设置超时 时间</span></span><br><span class="line"><span class="keyword">defer</span> cancel()</span><br><span class="line">r, err := c.SayHello(ctx, &amp;pb.HelloRequest&#123;Name: name&#125;) <span class="comment">// 使用客户端调用远程方法</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"could not greet: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">"Greeting: %s"</span>, r.Message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>流程: </p><blockquote><ol><li>创建客户端</li><li>新建一个Greeter连接客户端</li><li>设置超时 时间</li><li>使用客户端调用远程方法</li><li>cloes客户端连接 and cancel()</li></ol></blockquote><p>总结:</p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
            <tag> grpc </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>goose learn start</title>
      <link href="/2018/08/29/backend/go/goose/goose_start_learn/"/>
      <url>/2018/08/29/backend/go/goose/goose_start_learn/</url>
      <content type="html"><![CDATA[<h2 id="what-goose"><a href="#what-goose" class="headerlink" title="what goose"></a>what goose</h2><blockquote><p>goose is a database migration tool.<br>You can manage your database’s evolution by creating incremental SQL or Go scripts.</p></blockquote><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><p>这个前提是需要安装 golang, 并会就 <code>goose</code> 命令生成到 <code>$GOPATH/bin</code> 目录下.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go get bitbucket.org/liamstask/goose/cmd/goose</span></span><br></pre></td></tr></table></figure></p><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> goose</span></span><br><span class="line"></span><br><span class="line">goose is a database migration management system for Go projects.</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">    goose [options] &lt;subcommand&gt; [subcommand options]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -env string</span><br><span class="line">    which DB environment to use (default "development")</span><br><span class="line">  -path string</span><br><span class="line">    folder containing db info (default "db")</span><br><span class="line">  -pgschema string</span><br><span class="line">    which postgres-schema to migrate (default = none)</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">    up         Migrate the DB to the most recent version available</span><br><span class="line">    down       Roll back the version by 1</span><br><span class="line">    redo       Re-run the latest migration</span><br><span class="line">    status     dump the migration status for the current DB</span><br><span class="line">    create     Create the scaffolding for a new migration</span><br><span class="line">    dbversion  Print the current version of the database</span><br></pre></td></tr></table></figure><h3 id="create"><a href="#create" class="headerlink" title="create"></a>create</h3><p>创建一个新的 migration , 这个创建的是 go migration<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose create AddSomeColumns</span><br></pre></td></tr></table></figure></p><p>如果是创建 sql migration 的话, 在后边加个 sql 即可.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose create AddSomeColumns sql</span><br></pre></td></tr></table></figure></p><h3 id="up"><a href="#up" class="headerlink" title="up"></a>up</h3><p>应用所有可用的 migrations</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose up</span><br></pre></td></tr></table></figure><h3 id="down"><a href="#down" class="headerlink" title="down"></a>down</h3><p>从当前版本回滚单个 migrations<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose down</span><br></pre></td></tr></table></figure></p><h3 id="redo"><a href="#redo" class="headerlink" title="redo"></a>redo</h3><p>回滚最近应用的 migrations ，然后再次运行它。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose redo</span><br></pre></td></tr></table></figure><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><p>打印所有 migrations 的状态：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose status</span><br></pre></td></tr></table></figure><h3 id="dbversion"><a href="#dbversion" class="headerlink" title="dbversion"></a>dbversion</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">goose dbversion</span><br></pre></td></tr></table></figure><h2 id="个人实验数据"><a href="#个人实验数据" class="headerlink" title="个人实验数据"></a>个人实验数据</h2><h3 id="配置如下"><a href="#配置如下" class="headerlink" title="配置如下:"></a>配置如下:</h3><p>目录结构:</p><p>jieLearn/<br>├── dbconf.yml<br>└── migrations<br>    ├── 20180829163647_jieTest.sql<br>    └── 20180829165529_addC4Col.sql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat dbconf.yml</span></span><br><span class="line"></span><br><span class="line">development:</span><br><span class="line">    driver: mysql</span><br><span class="line">    open: root:password@tcp(127.0.0.1:3306)/jie_test?timeout=200ms&amp;parseTime=true&amp;loc=Local</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat jieLearn/migrations/20180829163647_jieTest.sql</span></span><br><span class="line"></span><br><span class="line">-- +goose Up</span><br><span class="line">-- SQL in section 'Up' is executed when this migration is applied</span><br><span class="line">CREATE TABLE `jie_test`.`test_table` (</span><br><span class="line">  `c1` INT NOT NULL,</span><br><span class="line">  `c2` VARCHAR(45) NULL,</span><br><span class="line">  `c3` VARCHAR(45) NULL,</span><br><span class="line">  PRIMARY KEY (`c1`));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- +goose Down</span><br><span class="line">-- SQL section 'Down' is executed when this migration is rolled back</span><br><span class="line">DROP TABLE `jie_test`.`test_table`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat jieLearn/migrations/20180829165529_addC4Col.sql</span></span><br><span class="line"></span><br><span class="line">-- +goose Up</span><br><span class="line">-- SQL in section 'Up' is executed when this migration is applied</span><br><span class="line">ALTER TABLE `jie_test`.`test_table`</span><br><span class="line">ADD COLUMN `c4` VARCHAR(45) NULL AFTER `c3`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- +goose Down</span><br><span class="line">-- SQL section 'Down' is executed when this migration is rolled back</span><br><span class="line">ALTER TABLE `jie_test`.`test_table`</span><br><span class="line">DROP COLUMN `c4`;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> goose -path <span class="string">"jieLearn"</span> up</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> goose -path <span class="string">"jieLearn"</span> down</span></span><br></pre></td></tr></table></figure><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>new table: goose_db_version, test_table</p><p>goose_db_version: content<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1012018-08-29 08:33:23</span><br><span class="line">22018082916364712018-08-29 08:33:23</span><br><span class="line">32018082916364702018-08-29 08:34:53</span><br><span class="line">42018082916364712018-08-29 08:35:35</span><br><span class="line">52018082916552912018-08-29 08:42:39</span><br><span class="line">62018082916552902018-08-29 08:43:00</span><br></pre></td></tr></table></figure></p><p>参考: <a href="https://bitbucket.org/liamstask/goose" target="_blank" rel="noopener">https://bitbucket.org/liamstask/goose</a></p>]]></content>
      
      <categories>
          
          <category> backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> go </tag>
            
            <tag> goose </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Build a Simple Database - Introduction and Setting up the REPL</title>
      <link href="/2018/05/17/build_own_x/data_base/build_simple_database/p1_introduction_and_setting_up_the_REPL/"/>
      <url>/2018/05/17/build_own_x/data_base/build_simple_database/p1_introduction_and_setting_up_the_REPL/</url>
      <content type="html"><![CDATA[<h1 id="Part-1-Introduction-and-Setting-up-the-REPL"><a href="#Part-1-Introduction-and-Setting-up-the-REPL" class="headerlink" title="Part 1 - Introduction and Setting up the REPL"></a>Part 1 - Introduction and Setting up the REPL</h1><h1 id="Sqlite"><a href="#Sqlite" class="headerlink" title="Sqlite"></a>Sqlite</h1><p>There’s lots of <a href="https://www.sqlite.org/arch.html" target="_blank" rel="noopener">documentation of sqlite internals</a> on their website, plus I’ve got a copy of <a href="https://play.google.com/store/books/details?id=9Z6IQQnX1JEC" target="_blank" rel="noopener">SQLite Database System: Design and Implementation</a>.</p><p> <img src="https://cstack.github.io/db_tutorial/assets/images/arch1.gif" alt="https://cstack.github.io/db_tutorial/assets/images/arch1.gif"></p><p>sqlite architecture (<a href="https://www.sqlite.org/zipvfs/doc/trunk/www/howitworks.wiki" target="_blank" rel="noopener">https://www.sqlite.org/zipvfs/doc/trunk/www/howitworks.wiki</a>)</p><p>分成前后端:</p><p>前端部分:</p><ul><li>tokenizer</li><li>parser</li><li>code generator</li></ul><p>后端部分:</p><ul><li>virtual machine</li><li>B-tree</li><li>pager</li><li>os interface</li></ul><p><a href="https://en.wiktionary.org/wiki/a_journey_of_a_thousand_miles_begins_with_a_single_step" target="_blank" rel="noopener">A journey of a thousand miles begins with a single step(千里之行始于足下)</a>, so let’s start with something a little more straightforward: the REPL.</p><p><strong>REPL:</strong> <em>read-execute-print</em></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">~ sqlite3</span><br><span class="line">SQLite version <span class="number">3.16</span><span class="number">.0</span> <span class="number">2016</span><span class="number">-11</span><span class="number">-04</span> <span class="number">19</span>:<span class="number">09</span>:<span class="number">39</span></span><br><span class="line">Enter <span class="string">".help"</span> <span class="keyword">for</span> usage hints.</span><br><span class="line">Connected to a transient in-memory database.</span><br><span class="line">Use <span class="string">".open FILENAME"</span> to reopen on a persistent database.</span><br><span class="line">sqlite&gt; create table users (id int, username varchar(255), email varchar(255));</span><br><span class="line">sqlite&gt; .tables</span><br><span class="line">users</span><br><span class="line">sqlite&gt; .<span class="built_in">exit</span></span><br><span class="line">~</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> build-own-x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> db原理 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Build a Simple Database - 模块功能概述</title>
      <link href="/2018/05/17/build_own_x/data_base/build_simple_database/%E6%A8%A1%E5%9D%97%E5%8A%9F%E8%83%BD%E6%A6%82%E8%BF%B0/"/>
      <url>/2018/05/17/build_own_x/data_base/build_simple_database/%E6%A8%A1%E5%9D%97%E5%8A%9F%E8%83%BD%E6%A6%82%E8%BF%B0/</url>
      <content type="html"><![CDATA[<p><img src="https://cstack.github.io/db_tutorial/assets/images/arch2.gif" alt="https://cstack.github.io/db_tutorial/assets/images/arch2.gif"></p><p>sqlite architecture (<a href="https://www.sqlite.org/arch.html" target="_blank" rel="noopener">https://www.sqlite.org/arch.html</a>)</p><p>小结:</p><p>core: 主要的构成模块: interface, sqlCommand Processor, Virtual Machine</p><p>SQL Compiler: Tokenizer, Parser, Code Generator</p><p>Backend: B-Tree, Pager, OS Interface</p><p>翻译:(<a href="https://www.sqlite.org/arch.html" target="_blank" rel="noopener">https://www.sqlite.org/arch.html</a>)</p><h3 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h3><p>SQLite的工作原理是将SQL文本编译为<a href="https://www.sqlite.org/opcode.html" target="_blank" rel="noopener">字节码</a>，然后使用虚拟机运行该字节码。</p><p>sqlite3_prepare_v2（）和相关接口充当用于将SQL文本转换为字节码的编译器。 sqlite3_stmt对象是用于实现单个SQL语句的单个字节码程序的容器。 sqlite3_step（）接口将一个字节码程序传递给虚拟机，并运行该程序直到它完成，或者形成一行结果返回，或者发生致命错误或中断。</p><h3 id="Interface"><a href="#Interface" class="headerlink" title="Interface"></a>Interface</h3><p>许多C语言接口可以在源文件main.c，legacy.c和vdbeapi.c中找到，尽管一些例程分散在其他文件中，在这些文件中它们可以访问具有文件范围的数据结构。sqlite3_get_table（）例程在table.c中实现。 sqlite3_mprintf（）例程在printf.c中找到。 sqlite3_complete（）接口位于tokenize.c中。 TCL接口由tclsqlite.c实现。</p><p>为避免名称冲突，SQLite库中的所有外部符号都以前缀sqlite3开头。那些用于外部使用的符号（换句话说，那些构成SQLite API的符号）会添加一个下划线，因此以sqlite3_开头。扩展API有时会在下划线之前添加扩展名;例如：sqlite3rbu_或sqlite3session_。</p><h3 id="Tokenizer"><a href="#Tokenizer" class="headerlink" title="Tokenizer"></a>Tokenizer</h3><p>当包含SQL语句的字符串要被评估时，它首先被发送到标记器。标记器将SQL文本分解为标记并将这些标记逐个传递给解析器。标记器是在文件tokenize.c中手动编码的</p><p>请注意，在此设计中，标记器调用解析器。熟悉YACC和BISON的人可能习惯于以相反的方式做事 - 让解析器调用标记器。不过，令牌分析器调用分析器会更好，因为它可以做成线程安全的并且运行速度更快。</p><h3 id="Parser"><a href="#Parser" class="headerlink" title="Parser"></a>Parser</h3><p>解析器根据其上下文为令牌分配含义。 SQLite的解析器是使用Lemon解析器生成器生成的。Lemon和YACC / BISON一样工作，但它使用了不太容易出错的不同输入语法。Lemon还生成一个可重入且线程安全的解析器。Lemon定义了非终端析构函数的概念，以便在遇到语法错误时不会泄漏内存。驱动Lemon并定义SQLite可理解的SQL语言的语法文件可在parse.y中找到。</p><p>因为Lemon是一个通常在开发机器上找不到的程序，Lemon的完整源代码（只有一个C文件）包含在SQLite分发的“tool”子目录中。</p><h3 id="Code-Generator"><a href="#Code-Generator" class="headerlink" title="Code Generator"></a>Code Generator</h3><p>解析器将令牌组装成解析树之后，代码生成器运行以分析解析器树并生成执行SQL语句工作的字节码。准备好的语句对象是这个字节码的容器。代码生成器中有许多文件，其中包括：attach.c，auth.c，build.c，delete.c，expr.c，insert.c，pragma.c，select.c，trigger.c，update.c ，vacuum.c，where.c，wherecode.c和whereexpr.c。在这些文件中，大部分严重的魔法都是在这里发生的。 expr.c处理表达式的代码生成。其中* .c处理SELECT，UPDATE和DELETE语句中WHERE子句的代码生成。文件attach.c，delete.c，insert.c，select.c，trigger.c update.c和vacuum.c处理具有相同名称的SQL语句的代码生成。 （这些文件中的每一个都根据需要调用expr.c和where.c中的例程。）所有其他SQL语句都由build.c编码。 auth.c文件实现sqlite3_set_authorizer（）的功能</p><p>代码生成器，特别是* .c和select.c中的逻辑有时称为查询规划器。对于任何特定的SQL语句，可能有数百，数千或数百万种不同的算法来计算答案。查询计划员是一个AI，致力于从数百万个选择中选择最佳算法。</p><h3 id="Bytecode-Engine"><a href="#Bytecode-Engine" class="headerlink" title="Bytecode Engine"></a>Bytecode Engine</h3><p>由代码生成器创建的字节码程序由虚拟机运行。</p><p>虚拟机本身完全包含在单个源文件vdbe.c中。 vdbe.h头文件定义了虚拟机和SQLite库的其余部分之间的接口，vdbeInt.h定义了虚拟机本身专用的结构和接口。其他各种vdbe * .c文件都是虚拟机的助手。 vdbeaux.c文件包含虚拟机使用的实用程序以及库的其余部分用于构建VM程序的接口模块。 vdbeapi.c文件包含虚拟机的外部接口，如sqlite3_bind_int（）和sqlite3_step（）。各个值（字符串，整数，浮点数和BLOB）存储在由vdbemem.c实现的名为“Mem”的内部对象中。</p><p>SQLite使用C语言例程的回调来实现SQL函数。即使内置的SQL函数也是这样实现的。大多数内置的SQL函数（例如：abs（），count（），substr（）等）都可以在func.c源文件中找到。日期和时间转换函数可在date.c中找到。一些函数如coalesce（）和typeof（）直接由代码生成器实现为字节码。</p><h3 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h3><p>SQLite数据库使用btree.c源文件中的B-tree实现在磁盘上进行维护。数据库中的每个表和索引都使用单独的B树。所有B树都存储在同一个磁盘文件中。文件格式细节稳定且定义明确，并保证向前兼容。</p><p>B树子系统和SQLite库的其余部分的接口由头文件btree.h定义。</p><h3 id="Page-Cache"><a href="#Page-Cache" class="headerlink" title="Page Cache"></a>Page Cache</h3><p>B树模块以固定大小的页面从磁盘请求信息。默认的page_size是4096字节，但可以是512到65536字节之间的任意两个幂。页面缓存负责读取，写入和缓存这些页面。页面缓存还提供了回滚和原子提交抽象，并负责锁定数据库文件。 B树驱动程序请求页面缓存中的特定页面，并在需要修改页面或提交或回滚更改时通知页面缓存。页面缓存处理了确保请求被快速，安全和有效地处理的所有细节.</p><p>主页面缓存实现在pager.c文件中。 WAL模式逻辑位于单独的wal.c中。内存中缓存由pcache.c和pcache1.c文件实现。页面缓存子系统和SQLite其余部分之间的接口由头文件pager.h定义。</p><p>###OS Interface</p><p>为了提供跨操作系统的可移植性，SQLite使用称为VFS的抽象对象。每个VFS都提供了打开，读取，写入和关闭磁盘上的文件以及执行其他特定于操作系统的任务（如查找当前时间或获取随机性以初始化内置伪随机数生成器的方法）。 SQLite当前为unix（在os_unix.c文件中）和Windows（在os_win.c文件中）提供了VFSes。</p><h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><p>内存分配，无格式字符串比较例程，便携式文本到数字转换例程以及其他实用程序位于util.c中。解析器使用的符号表由散列表中的哈希表维护。 utf.c源文件包含Unicode转换子例程。 SQLite在printf.c中有它自己的printf（）（有一些扩展）的私有实现，在random.c中有它自己的伪随机数生成器（PRNG）。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结:"></a>总结:</h3><p>sqlite(数据库)将数据持久化,并将其做到了极致吧.(引人深思)</p><p>整体结构, 主要分成三部分: 1. core, 2. SQL Compiler, 3. Backend</p><p>其主要流程也相当清晰:</p><p>   interface -&gt; sqlCommand Processor -&gt; Virtual Machine</p>]]></content>
      
      <categories>
          
          <category> build-own-x </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
            <tag> db原理 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Dual pivot Quicksort</title>
      <link href="/2018/04/27/alg/sorting/Dual_pivot_Quicksort/"/>
      <url>/2018/04/27/alg/sorting/Dual_pivot_Quicksort/</url>
      <content type="html"><![CDATA[<p>time: 2018-04-27 14:55:52</p><p>参考：<a href="https://www.geeksforgeeks.org/dual-pivot-quicksort/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/dual-pivot-quicksort/</a></p><blockquote><p>  The idea of dual pivot quick sort is to take two pivots, one in the left end of the array and the second, in the right end of the array. The left pivot must be less than or equal to the right pivot, so we swap them if necessary.</p><p>  Then, we begin partitioning the array into three parts: in the first part, all elements will be less than the left pivot, in the second part all elements will be greater or equal to the left pivot and also will be less than or equal to the right pivot, and in the third part all elements will be greater than the right pivot. Then, we shift the two pivots to their appropriate positions as we see in the below bar, and after that we begin quicksorting these three parts recursively, using this method.</p><p>  Dual pivot quick sort is a little bit faster than the original single pivot quicksort.But still, the worst case will remain O(n^2) when the array is already sorted in an increasing or decreasing order.</p></blockquote><p><img src="http://contribute.geeksforgeeks.org/wp-content/uploads/dual.png" alt="An example"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C program to implement dual pivot QuickSort</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span>* lp)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span>* b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> temp = *a;</span><br><span class="line">*a = *b;</span><br><span class="line">*b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DualPivotQuickSort</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line"><span class="comment">// lp means left pivot, and rp means right pivot.</span></span><br><span class="line"><span class="keyword">int</span> lp, rp; </span><br><span class="line">rp = partition(arr, low, high, &amp;lp);</span><br><span class="line">DualPivotQuickSort(arr, low, lp - <span class="number">1</span>);</span><br><span class="line">DualPivotQuickSort(arr, lp + <span class="number">1</span>, rp - <span class="number">1</span>);</span><br><span class="line">DualPivotQuickSort(arr, rp + <span class="number">1</span>, high);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high, <span class="keyword">int</span>* lp)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"------- begin partition --------\n"</span>);</span><br><span class="line"><span class="keyword">if</span> (arr[low] &gt; arr[high])</span><br><span class="line">swap(&amp;arr[low], &amp;arr[high]);</span><br><span class="line"><span class="comment">// p is the left pivot, and q is the right pivot.</span></span><br><span class="line"><span class="keyword">int</span> j = low + <span class="number">1</span>,g = high - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> k = low + <span class="number">1</span>, p = arr[low], q = arr[high];</span><br><span class="line"><span class="keyword">while</span> (k &lt;= g) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"j: %d value: %d, g: %d value: %d, k: %d value: %d\n"</span>, j, arr[j], g, arr[g], k, arr[k]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// if elements are less than the left pivot</span></span><br><span class="line"><span class="keyword">if</span> (arr[k] &lt; p) &#123;</span><br><span class="line">swap(&amp;arr[k], &amp;arr[j]);</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if elements are greater than or equal </span></span><br><span class="line"><span class="comment">// to the right pivot</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (arr[k] &gt;= q) &#123;</span><br><span class="line"><span class="keyword">while</span> (arr[g] &gt; q &amp;&amp; k &lt; g)</span><br><span class="line">g--;</span><br><span class="line">swap(&amp;arr[k], &amp;arr[g]);</span><br><span class="line">g--;</span><br><span class="line"><span class="keyword">if</span> (arr[k] &lt; p) &#123;</span><br><span class="line">swap(&amp;arr[k], &amp;arr[j]);</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">k++;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, arr[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">j--;</span><br><span class="line">g++;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bring pivots to their appropriate positions.</span></span><br><span class="line">swap(&amp;arr[low], &amp;arr[j]);</span><br><span class="line">swap(&amp;arr[high], &amp;arr[g]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// returning the indeces of the pivots.</span></span><br><span class="line">*lp = j; <span class="comment">// because we cannot return two elements </span></span><br><span class="line"><span class="comment">// from a function.</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"------- end partition --------\n"</span>);</span><br><span class="line"><span class="keyword">return</span> g;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Driver code</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> arr[] = &#123; <span class="number">24</span>, <span class="number">8</span>, <span class="number">42</span>, <span class="number">75</span>, <span class="number">29</span>, <span class="number">77</span>, <span class="number">38</span>, <span class="number">57</span> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"24, 8, 42, 75, 29, 77, 38, 57\n"</span>);</span><br><span class="line">DualPivotQuickSort(arr, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Sorted array: "</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d "</span>, arr[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">24, 8, 42, 75, 29, 77, 38, 57</span><br><span class="line">------- begin partition --------</span><br><span class="line">j: 1 value: 8, g: 6 value: 38, k: 1 value: 8</span><br><span class="line">24 8 42 75 29 77 38 57 </span><br><span class="line">j: 2 value: 42, g: 6 value: 38, k: 2 value: 42</span><br><span class="line">24 8 42 75 29 77 38 57 </span><br><span class="line">j: 2 value: 42, g: 6 value: 38, k: 3 value: 75</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">j: 2 value: 42, g: 5 value: 77, k: 4 value: 29</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">j: 2 value: 42, g: 5 value: 77, k: 5 value: 77</span><br><span class="line">24 8 42 38 29 77 75 57 </span><br><span class="line">------- end partition --------</span><br><span class="line">------- begin partition --------</span><br><span class="line">j: 3 value: 38, g: 3 value: 38, k: 3 value: 38</span><br><span class="line">8 24 29 38 42 57 75 77 </span><br><span class="line">------- end partition --------</span><br><span class="line">------- begin partition --------</span><br><span class="line">------- end partition --------</span><br><span class="line">Sorted array: 8 24 29 38 42 57 75 77</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基本的处理流程：</p><ol><li><p>选定最低位和最高位作为轴 num，也就是有两个轴。</p></li><li><p>lowPoint = low + 1 和 highPoint = high - 1 作为选轴的开始点。</p></li><li><p>scanPoint = lowPoint 一直扫描到 highPoint， 如果 scanPoint_Value &lt; low_Value : swap(lowPoint_Value, scanPoint_Value) elseif (scanPoint_Value &gt;= high_Value) : swap(highPoint_Value, scanPoint_Value)</p></li><li><p>最后 swap(low_Value, (lowPoint - 1).Value), swap(high_Value, (highPoint + 1)_Value)</p></li></ol>]]></content>
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sorting </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
